<!DOCTYPE html>
<html>
<head>	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/foundation.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js-bootstrap-css/1.2.1/typeaheadjs.min.css">
	<link rel="stylesheet" type="text/css" data-href="common.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-3-typeahead/3.1.1/bootstrap3-typeahead.min.js"></script>
	<script data-src="common.js"></script>

	<script>
        (function () {
            var cachekey;
            try {
                cachekey = window.parent.CACHEKEY;
            }
            catch (e) {
                cachekey = 'nocache';
            }
            $('link[data-href]').attr('href', function () {
                return this.dataset.href + '?' + cachekey;
            });
            $('script[data-src]').attr('src', function () {
                return this.dataset.src + '?' + cachekey;
            });

            $(document).on('click', 'a[href]:not([target="_blank"]):not(.cachekey)', function () {
                this.classList.add('cachekey');
                this.href = this.href.replace('.html', '.html?' + cachekey);
            });
        })();
	</script>
    </head>
<body class="typespace">
<a id="anchor" href="./" style="display: none"></a>
<h1 class="ellipsis fixed">
	<span class="pull-left">
	Structure
	<small class="ellipsis-text">(ryunosuke\Functions\Package\FileSystem)</small>
	</span>
	<span class="pull-right">
		<small class="frame-switch">
		<a target="_parent">frame</a> | <a target="_parent">noframe</a>
		</small>
	</span>
</h1>
<div class="main-wrapper">
	<div class="attribute">
		<span class="label label-danger"></span>
		<span class="label label-warning"></span>
		<span class="label label-info"></span>
		<span class="label label-info"></span>
		<span class="label label-deprecated"></span>
        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L5-L1089" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                    	</div>

	<h2>class <span class="category-name">ryunosuke\Functions\Package\FileSystem</span></h2>

	<div class="description"><p>ファイルシステム関連のユーティリティ</p>
</div>

	<h3>Construction</h3>
                
	<h3>Hierarchy</h3>
	<div class="hierarchy"></div>

	<h3>Constants</h3>
    
	<h3>Properties</h3>
    
	<h3>Methods</h3>
    		<ul>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L10-L53" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::file_list()" tabindex="-1" class="structure-title ">
                        file_list                        	<small>($dirname, $filter_condition = null) : array<span class="type-separator"></span><wbr>false</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>ファイル一覧を配列で返す</p>
<p>Example:</p>
<pre><code class="language-php">// 適当にファイルを用意
$DS = DIRECTORY_SEPARATOR;
$tmp = sys_get_temp_dir() . "{$DS}file_list";
rm_rf($tmp, false);
file_set_contents("$tmp/a.txt", 'a');
file_set_contents("$tmp/dir/b.txt", 'b');
file_set_contents("$tmp/dir/dir/c.txt", 'c');
// ファイル一覧が取得できる
assertEquals(file_list($tmp), [
    "$tmp{$DS}a.txt",
    "$tmp{$DS}dir{$DS}b.txt",
    "$tmp{$DS}dir{$DS}dir{$DS}c.txt",
], '', 0, 10, true);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$dirname</td>
				<td class="desc"><p>調べるディレクトリ名</p>
</td>
			</tr>
        			<tr>
				<td class="type"><a href="http://php.net/manual/ja/class.closure.php" class="fqsen" target="_blank">\Closure</a><span class="type-separator"></span><wbr>array</td>
				<td class="rest">$filter_condition = null</td>
				<td class="desc"><p>フィルタ条件</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array<span class="type-separator"></span><wbr>false</td>
			<td class="desc"><p>ファイルの配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L55-L120" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::file_tree()" tabindex="-1" class="structure-title ">
                        file_tree                        	<small>($dirname, $filter_condition = null) : array<span class="type-separator"></span><wbr>false</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>ディレクトリ階層をツリー構造で返す</p>
<p>Example:</p>
<pre><code class="language-php">// 適当にファイルを用意
$DS = DIRECTORY_SEPARATOR;
$tmp = sys_get_temp_dir() . "{$DS}file_tree";
rm_rf($tmp, false);
file_set_contents("$tmp/a.txt", 'a');
file_set_contents("$tmp/dir/b.txt", 'b');
file_set_contents("$tmp/dir/dir/c.txt", 'c');
// ファイルツリーが取得できる
assertEquals(file_tree($tmp), [
    'file_tree' =&gt; [
        'a.txt' =&gt; "$tmp{$DS}a.txt",
        'dir'   =&gt; [
            'b.txt' =&gt; "$tmp{$DS}dir{$DS}b.txt",
            'dir'   =&gt; [
                'c.txt' =&gt; "$tmp{$DS}dir{$DS}dir{$DS}c.txt",
            ],
        ],
    ],
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$dirname</td>
				<td class="desc"><p>調べるディレクトリ名</p>
</td>
			</tr>
        			<tr>
				<td class="type"><a href="http://php.net/manual/ja/class.closure.php" class="fqsen" target="_blank">\Closure</a><span class="type-separator"></span><wbr>array</td>
				<td class="rest">$filter_condition = null</td>
				<td class="desc"><p>フィルタ条件</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array<span class="type-separator"></span><wbr>false</td>
			<td class="desc"><p>ツリー構造の配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L122-L155" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::file_suffix()" tabindex="-1" class="structure-title ">
                        file_suffix                        	<small>($filename, $suffix) : string</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>ファイル名にサフィックスを付与する</p>
<p>pathinfoに非準拠。例えば「filename.hoge.fuga」のような形式は「filename」が変換対象になる。</p>
<p>Example:</p>
<pre><code class="language-php">assertSame(file_suffix('filename.ext', '-min'), 'filename-min.ext');
assertSame(file_suffix('filename.ext1.ext2', '-min'), 'filename-min.ext1.ext2');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$filename</td>
				<td class="desc"><p>パス・ファイル名</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$suffix</td>
				<td class="desc"><p>付与するサフィックス</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>サフィックスが付与されたパス名</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L157-L191" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::file_extension()" tabindex="-1" class="structure-title ">
                        file_extension                        	<small>($filename, $extension = &quot;&quot;) : string</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>ファイルの拡張子を変更する。引数を省略すると拡張子を返す</p>
<p>pathinfo に準拠。例えば「filename.hoge.fuga」のような形式は「fuga」が変換対象になる。</p>
<p>Example:</p>
<pre><code class="language-php">assertSame(file_extension('filename.ext'), 'ext');
assertSame(file_extension('filename.ext', 'txt'), 'filename.txt');
assertSame(file_extension('filename.ext', ''), 'filename');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$filename</td>
				<td class="desc"><p>調べるファイル名</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$extension = &quot;&quot;</td>
				<td class="desc"><p>拡張子。nullや空文字なら拡張子削除</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>拡張子変換後のファイル名 or 拡張子</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L193-L232" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::file_set_contents()" tabindex="-1" class="structure-title ">
                        file_set_contents                        	<small>($filename, $data, $umask = 2) : int</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>ディレクトリも掘る file_put_contents</p>
<p>書き込みは一時ファイルと rename を使用してアトミックに行われる。</p>
<p>Example:</p>
<pre><code class="language-php">file_set_contents(sys_get_temp_dir() . '/not/filename.ext', 'hoge');
assertSame(file_get_contents(sys_get_temp_dir() . '/not/filename.ext'), 'hoge');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$filename</td>
				<td class="desc"><p>書き込むファイル名</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$data</td>
				<td class="desc"><p>書き込む内容</p>
</td>
			</tr>
        			<tr>
				<td class="type">int</td>
				<td class="rest">$umask = 2</td>
				<td class="desc"><p>ディレクトリを掘る際の umask</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">int</td>
			<td class="desc"><p>書き込まれたバイト数</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L234-L293" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::file_rewrite_contents()" tabindex="-1" class="structure-title ">
                        file_rewrite_contents                        	<small>($filename, $callback, $operation = 0) : int</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>ファイルを読み込んで内容をコールバックに渡して書き込む</p>
<p>Example:</p>
<pre><code class="language-php">// 適当にファイルを用意
$testpath = sys_get_temp_dir() . '/rewrite.txt';
file_put_contents($testpath, 'hoge');
// 前後に 'pre-', '-fix' を付与する
file_rewrite_contents($testpath, function($contents, $fp){ return "pre-$contents-fix"; });
assertStringEqualsFile($testpath, 'pre-hoge-fix');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$filename</td>
				<td class="desc"><p>読み書きするファイル名</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>書き込む内容。引数で $contents, $fp が渡ってくる</p>
</td>
			</tr>
        			<tr>
				<td class="type">int</td>
				<td class="rest">$operation = 0</td>
				<td class="desc"><p>ロック定数（LOCL_SH, LOCK_EX, LOCK_NB）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">int</td>
			<td class="desc"><p>書き込まれたバイト数</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L295-L315" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::mkdir_p()" tabindex="-1" class="structure-title ">
                        mkdir_p                        	<small>($dirname, $umask = 2) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>ディレクトリを再帰的に掘る</p>
<p>既に存在する場合は何もしない（エラーも出さない）。</p>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$dirname</td>
				<td class="desc"><p>ディレクトリ名</p>
</td>
			</tr>
        			<tr>
				<td class="type">int</td>
				<td class="rest">$umask = 2</td>
				<td class="desc"><p>ディレクトリを掘る際の umask</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>作成したら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L317-L348" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::dirname_r()" tabindex="-1" class="structure-title ">
                        dirname_r                        	<small>($path, $callback) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>コールバックが true 相当を返すまで親ディレクトリを辿り続ける</p>
<p>コールバックには親ディレクトリが引数として渡ってくる。</p>
<p>Example:</p>
<pre><code class="language-php">// //tmp/a/b/file.txt を作っておく
$tmp = sys_get_temp_dir();
file_set_contents("$tmp/a/b/file.txt", 'hoge');
// /a/b/c/d/e/f から開始して「どこかの階層の file.txt を探したい」という状況を想定
$callback = function($path){return realpath("$path/file.txt");};
assertSame(dirname_r("$tmp/a/b/c/d/e/f", $callback), realpath("$tmp/a/b/file.txt"));
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$path</td>
				<td class="desc"><p>パス名</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>コールバック</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>$callback の返り値。頂上まで辿ったら false</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L350-L395" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::dirmtime()" tabindex="-1" class="structure-title ">
                        dirmtime                        	<small>($dirname, $recursive = true) : int</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>ディレクトリの最終更新日時を返す</p>
<p>「ディレクトリの最終更新日時」とは filemtime で得られる結果ではなく、「配下のファイル群で最も新しい日時」を表す。<br />
ディレクトリの mtime も検出に含まれるので、ファイルを削除した場合も検知できる。</p>
<p>ファイル名を与えると例外を投げる。<br />
空ディレクトリの場合は自身の mtime を返す。</p>
<p>Example:</p>
<pre><code class="language-php">$dirname = sys_get_temp_dir() . '/mtime';
rm_rf($dirname);
mkdir($dirname);

// この時点では現在日時（単純に自身の更新日時）
assertSame(dirmtime($dirname), time());
// ファイルを作って更新するとその時刻
touch("$dirname/tmp", time() + 10);
assertSame(dirmtime($dirname), time() + 10);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$dirname</td>
				<td class="desc"><p>ディレクトリ名</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$recursive = true</td>
				<td class="desc"><p>再帰フラグ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">int</td>
			<td class="desc"><p>最終更新日時</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L397-L429" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::fnmatch_and()" tabindex="-1" class="structure-title ">
                        fnmatch_and                        	<small>($patterns, $string, $flags = 0) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>fnmatch の AND 版</p>
<p>$patterns のうちどれか一つでもマッチしなかったら false を返す。<br />
$patterns が空だと例外を投げる。</p>
<p>Example:</p>
<pre><code class="language-php">// すべてにマッチするので true
assertTrue(fnmatch_and(['*aaa*', '*bbb*'], 'aaaXbbbX'));
// aaa にはマッチするが bbb にはマッチしないので false
assertFalse(fnmatch_and(['*aaa*', '*bbb*'], 'aaaX'));
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr>string</td>
				<td class="rest">$patterns</td>
				<td class="desc"><p>パターン配列（単一文字列可）</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$string</td>
				<td class="desc"><p>調べる文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">int</td>
				<td class="rest">$flags = 0</td>
				<td class="desc"><p>FNM_***</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>すべてにマッチしたら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L431-L463" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::fnmatch_or()" tabindex="-1" class="structure-title ">
                        fnmatch_or                        	<small>($patterns, $string, $flags = 0) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>fnmatch の OR 版</p>
<p>$patterns のうちどれか一つでもマッチしたら true を返す。<br />
$patterns が空だと例外を投げる。</p>
<p>Example:</p>
<pre><code class="language-php">// aaa にマッチするので true
assertTrue(fnmatch_or(['*aaa*', '*bbb*'], 'aaaX'));
// どれともマッチしないので false
assertFalse(fnmatch_or(['*aaa*', '*bbb*'], 'cccX'));
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr>string</td>
				<td class="rest">$patterns</td>
				<td class="desc"><p>パターン配列（単一文字列可）</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$string</td>
				<td class="desc"><p>調べる文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">int</td>
				<td class="rest">$flags = 0</td>
				<td class="desc"><p>FNM_***</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>どれかにマッチしたら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L465-L504" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::path_is_absolute()" tabindex="-1" class="structure-title ">
                        path_is_absolute                        	<small>($path) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>パスが絶対パスか判定する</p>
<p>Example:</p>
<pre><code class="language-php">assertTrue(path_is_absolute('/absolute/path'));
assertFalse(path_is_absolute('relative/path'));
// Windows 環境では下記も true になる
if (DIRECTORY_SEPARATOR === '\\') {
    assertTrue(path_is_absolute('\\absolute\\path'));
    assertTrue(path_is_absolute('C:\\absolute\\path'));
}
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$path</td>
				<td class="desc"><p>パス文字列</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>絶対パスなら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L506-L534" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::path_resolve()" tabindex="-1" class="structure-title ">
                        path_resolve                        	<small>(...$paths) : string</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>パスを絶対パスに変換して正規化する</p>
<p>可変引数で与えられた文字列群を結合して絶対パス化して返す。<br />
出来上がったパスが絶対パスでない場合はカレントディレクトリを結合して返す。</p>
<p>Example:</p>
<pre><code class="language-php">$DS = DIRECTORY_SEPARATOR;
assertSame(path_resolve('/absolute/path'), "{$DS}absolute{$DS}path");
assertSame(path_resolve('absolute/path'), getcwd() . "{$DS}absolute{$DS}path");
assertSame(path_resolve('/absolute/path/through', '../current/./path'), "{$DS}absolute{$DS}path{$DS}current{$DS}path");
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">...$paths</td>
				<td class="desc"><p>パス文字列（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>絶対パス</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L536-L578" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::path_normalize()" tabindex="-1" class="structure-title ">
                        path_normalize                        	<small>($path) : string</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>パスを正規化する</p>
<p>具体的には ./ や ../ を取り除いたり連続したディレクトリ区切りをまとめたりする。<br />
realpath ではない。のでシンボリックリンクの解決などはしない。その代わりファイルが存在しなくても使用することができる。</p>
<p>Example:</p>
<pre><code class="language-php">$DS = DIRECTORY_SEPARATOR;
assertSame(path_normalize('/path/to/something'), "{$DS}path{$DS}to{$DS}something");
assertSame(path_normalize('/path/through/../something'), "{$DS}path{$DS}something");
assertSame(path_normalize('./path/current/./through/../something'), "path{$DS}current{$DS}something");
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$path</td>
				<td class="desc"><p>パス文字列</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>正規化されたパス</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L580-L647" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::cp_rf()" tabindex="-1" class="structure-title ">
                        cp_rf                        	<small>($src, $dst) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>ディレクトリのコピー</p>
<p>$dst に / を付けると「$dst に自身をコピー」する。付けないと「$dst に中身をコピー」するという動作になる。</p>
<p>ディレクトリではなくファイルを与えても動作する（copy とほぼ同じ動作になるが、対象にディレクトリを指定できる点が異なる）。</p>
<p>Example:</p>
<pre><code class="language-php">// /tmp/src/hoge.txt, /tmp/src/dir/fuga.txt を作っておく
$tmp = sys_get_temp_dir();
file_set_contents("$tmp/src/hoge.txt", 'hoge');
file_set_contents("$tmp/src/dir/fuga.txt", 'fuga');

// "/" を付けないと中身コピー
cp_rf("$tmp/src", "$tmp/dst1");
assertStringEqualsFile("$tmp/dst1/hoge.txt", 'hoge');
assertStringEqualsFile("$tmp/dst1/dir/fuga.txt", 'fuga');
// "/" を付けると自身コピー
cp_rf("$tmp/src", "$tmp/dst2/");
assertStringEqualsFile("$tmp/dst2/src/hoge.txt", 'hoge');
assertStringEqualsFile("$tmp/dst2/src/dir/fuga.txt", 'fuga');

// $src はファイルでもいい（$dst に "/" を付けるとそのディレクトリにコピーする）
cp_rf("$tmp/src/hoge.txt", "$tmp/dst3/");
assertStringEqualsFile("$tmp/dst3/hoge.txt", 'hoge');
// $dst に "/" を付けないとそのパスとしてコピー（copy と完全に同じ）
cp_rf("$tmp/src/hoge.txt", "$tmp/dst4");
assertStringEqualsFile("$tmp/dst4", 'hoge');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$src</td>
				<td class="desc"><p>コピー元パス</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$dst</td>
				<td class="desc"><p>コピー先パス。末尾/でディレクトリであることを明示できる</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>成功した場合に TRUE を、失敗した場合に FALSE を返します</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L649-L684" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::rm_rf()" tabindex="-1" class="structure-title ">
                        rm_rf                        	<small>($dirname, $self = true) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>中身があっても消せる rmdir</p>
<p>Example:</p>
<pre><code class="language-php">mkdir(sys_get_temp_dir() . '/new/make/dir', 0777, true);
rm_rf(sys_get_temp_dir() . '/new');
assertSame(file_exists(sys_get_temp_dir() . '/new'), false);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$dirname</td>
				<td class="desc"><p>削除するディレクトリ名</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$self = true</td>
				<td class="desc"><p>自分自身も含めるか。false を与えると中身だけを消す</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>成功した場合に TRUE を、失敗した場合に FALSE を返します</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L686-L731" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::tmpname()" tabindex="-1" class="structure-title ">
                        tmpname                        	<small>($prefix = &quot;rft&quot;, $dir = null) : string</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>終了時に削除される一時ファイル名を生成する</p>
<p>tempnam とほぼ同じで違いは下記。</p>
<ul>
<li>引数が逆</li>
<li>終了時に削除される</li>
<li>失敗時に false を返すのではなく例外を投げる</li>
</ul>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$prefix = &quot;rft&quot;</td>
				<td class="desc"><p>ファイル名プレフィックス</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$dir = null</td>
				<td class="desc"><p>生成ディレクトリ。省略時は sys_get_temp_dir()</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>一時ファイル名</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/FileSystem.php#L733-L1088" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\FileSystem::memory_path()" tabindex="-1" class="structure-title ">
                        memory_path                        	<small>($path) : string</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>ファイルのように扱えるメモリ上のパスを返す</p>
<p>劣化 vfsStream のようなもの。<br />
stream wrapper を用いて実装しており、そのプロトコルは初回呼び出し時に1度だけ登録される。<br />
プロトコル名は決め打ちだが、 php.ini に "rfunc.memory_stream" というキーで文字列を指定するとそれが使用される。</p>
<p>ファイル操作はある程度できるが、ディレクトリ操作は未対応（そこまでしたいなら vfsStream とか /dev/shm とかを使えば良い）。</p>
<p>Example:</p>
<pre><code class="language-php">// ファイル名のように読み書きができるパスを返す（一時ファイルを使用するよりかなり高速に動作する）
$memory_path = memory_path('filename.txt');
// 呼んだだけでは何もしないので存在しない
assertSame(file_exists($memory_path), false);
// file_put_contents が使える
assertSame(file_put_contents($memory_path, 'Hello, World'), 12);
// file_get_contents が使える
assertSame(file_get_contents($memory_path), 'Hello, World');
// 上記の操作で実体が存在している
assertSame(file_exists($memory_path), true);
// unlink が使える
assertSame(unlink($memory_path), true);
// unlink したので存在しない
assertSame(file_exists($memory_path), false);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$path</td>
				<td class="desc"><p>パス名（実質的に一意なファイル名）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>メモリ上のパス</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            		</ul>
    
	<div class="attribute">
		<span class="label label-default"></span>
		<span class="label label-default"></span>
	</div>
	<div class="clearfix"></div>
</div>
</body>
</html>
