<!DOCTYPE html>
<html>
<head>	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/foundation.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js-bootstrap-css/1.2.1/typeaheadjs.min.css">
	<link rel="stylesheet" type="text/css" data-href="common.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-3-typeahead/3.1.1/bootstrap3-typeahead.min.js"></script>
	<script data-src="common.js"></script>

	<script>
        (function () {
            var cachekey;
            try {
                cachekey = window.parent.CACHEKEY;
            }
            catch (e) {
                cachekey = 'nocache';
            }
            $('link[data-href]').attr('href', function () {
                return this.dataset.href + '?' + cachekey;
            });
            $('script[data-src]').attr('src', function () {
                return this.dataset.src + '?' + cachekey;
            });

            $(document).on('click', 'a[href]:not([target="_blank"]):not(.cachekey)', function () {
                this.classList.add('cachekey');
                this.href = this.href.replace('.html', '.html?' + cachekey);
            });
        })();
	</script>
    </head>
<body class="typespace">
<a id="anchor" href="./" style="display: none"></a>
<h1 class="ellipsis fixed">
	<span class="pull-left">
	Structure
	<small class="ellipsis-text">(ryunosuke\Functions\Package\Arrays)</small>
	</span>
	<span class="pull-right">
		<small class="frame-switch">
		<a target="_parent">frame</a> | <a target="_parent">noframe</a>
		</small>
	</span>
</h1>
<div class="main-wrapper">
	<div class="attribute">
		<span class="label label-danger"></span>
		<span class="label label-warning"></span>
		<span class="label label-info"></span>
		<span class="label label-info"></span>
		<span class="label label-deprecated"></span>
        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L5-L4361" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                    	</div>

	<h2>class <span class="category-name">ryunosuke\Functions\Package\Arrays</span></h2>

	<div class="description"><p>配列関連のユーティリティ</p>
</div>

	<h3>Construction</h3>
                
	<h3>Hierarchy</h3>
	<div class="hierarchy"></div>

	<h3>Constants</h3>
    
	<h3>Properties</h3>
    
	<h3>Methods</h3>
    		<ul>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L10-L39" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::arrays()" tabindex="-1" class="structure-title ">
                        arrays                        	<small>($array) : <a href="http://php.net/manual/ja/class.generator.php" class="fqsen" target="_blank">\Generator</a></small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列をシーケンシャルに走査するジェネレータを返す</p>
<p>「シーケンシャルに」とは要するに数値連番が得られるように走査するということ。<br />
0ベースの連番を作ってインクリメントしながら foreach するのと全く変わらない。</p>
<p>キーは連番、値は [$key, $value] で返す。<br />
つまり、 Example のように foreach の list 構文を使えば「連番、キー、値」でループを回すことが可能になる。<br />
「foreach で回したいんだけど連番も欲しい」という状況はまれによくあるはず。</p>
<p>Example:</p>
<pre><code class="language-php">$array = ['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'];
$nkv = [];
foreach (arrays($array) as $n =&gt; [$k, $v]) {
    $nkv[] = "$n,$k,$v";
}
that($nkv)-&gt;isSame(['0,a,A', '1,b,B', '2,c,C']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type"><a href="http://php.net/manual/ja/class.generator.php" class="fqsen" target="_blank">\Generator</a></td>
			<td class="desc"><p>[$seq =&gt; [$key, $value]] を返すジェネレータ</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L41-L74" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::arrayize()" tabindex="-1" class="structure-title ">
                        arrayize                        	<small>(...$variadic) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>引数の配列を生成する。</p>
<p>配列以外を渡すと配列化されて追加される。<br />
連想配列は未対応。あくまで普通の配列化のみ。<br />
iterable や Traversable は考慮せずあくまで「配列」としてチェックする。</p>
<p>Example:</p>
<pre><code class="language-php">that(arrayize(1, 2, 3))-&gt;isSame([1, 2, 3]);
that(arrayize([1], [2], [3]))-&gt;isSame([1, 2, 3]);
$object = new \stdClass();
that(arrayize($object, false, [1, 2, 3]))-&gt;isSame([$object, false, 1, 2, 3]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">...$variadic</td>
				<td class="desc"><p>生成する要素（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>引数を配列化したもの</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L76-L104" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::is_indexarray()" tabindex="-1" class="structure-title ">
                        is_indexarray                        	<small>($array) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列が数値配列か調べる</p>
<p>空の配列も数値配列とみなす。<br />
さらにいわゆる「連番配列」ではなく「キーが数値のみか？」で判定する。</p>
<p>つまり、 is_hasharray とは排他的ではない。</p>
<p>Example:</p>
<pre><code class="language-php">that(is_indexarray([]))-&gt;isTrue();
that(is_indexarray([1, 2, 3]))-&gt;isTrue();
that(is_indexarray(['x' =&gt; 'X']))-&gt;isFalse();
// 抜け番があっても true になる（これは is_hasharray も true になる）
that(is_indexarray([1 =&gt; 1, 2 =&gt; 2, 3 =&gt; 3]))-&gt;isTrue();
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>調べる配列</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>数値配列なら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L106-L130" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::is_hasharray()" tabindex="-1" class="structure-title ">
                        is_hasharray                        	<small>($array) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列が連想配列か調べる</p>
<p>空の配列は普通の配列とみなす。</p>
<p>Example:</p>
<pre><code class="language-php">that(is_hasharray([]))-&gt;isFalse();
that(is_hasharray([1, 2, 3]))-&gt;isFalse();
that(is_hasharray(['x' =&gt; 'X']))-&gt;isTrue();
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>調べる配列</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>連想配列なら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L132-L155" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::first_key()" tabindex="-1" class="structure-title ">
                        first_key                        	<small>($array, $default = null) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の最初のキーを返す</p>
<p>空の場合は $default を返す。</p>
<p>Example:</p>
<pre><code class="language-php">that(first_key(['a', 'b', 'c']))-&gt;isSame(0);
that(first_key([], 999))-&gt;isSame(999);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$default = null</td>
				<td class="desc"><p>無かった場合のデフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>最初のキー</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L157-L180" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::first_value()" tabindex="-1" class="structure-title ">
                        first_value                        	<small>($array, $default = null) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の最初の値を返す</p>
<p>空の場合は $default を返す。</p>
<p>Example:</p>
<pre><code class="language-php">that(first_value(['a', 'b', 'c']))-&gt;isSame('a');
that(first_value([], 999))-&gt;isSame(999);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$default = null</td>
				<td class="desc"><p>無かった場合のデフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>最初の値</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L182-L203" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::first_keyvalue()" tabindex="-1" class="structure-title ">
                        first_keyvalue                        	<small>($array, $default = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の最初のキー/値ペアをタプルで返す</p>
<p>空の場合は $default を返す。</p>
<p>Example:</p>
<pre><code class="language-php">that(first_keyvalue(['a', 'b', 'c']))-&gt;isSame([0, 'a']);
that(first_keyvalue([], 999))-&gt;isSame(999);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$default = null</td>
				<td class="desc"><p>無かった場合のデフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>[最初のキー, 最初の値]</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L205-L228" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::last_key()" tabindex="-1" class="structure-title ">
                        last_key                        	<small>($array, $default = null) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の最後のキーを返す</p>
<p>空の場合は $default を返す。</p>
<p>Example:</p>
<pre><code class="language-php">that(last_key(['a', 'b', 'c']))-&gt;isSame(2);
that(last_key([], 999))-&gt;isSame(999);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$default = null</td>
				<td class="desc"><p>無かった場合のデフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>最後のキー</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L230-L253" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::last_value()" tabindex="-1" class="structure-title ">
                        last_value                        	<small>($array, $default = null) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の最後の値を返す</p>
<p>空の場合は $default を返す。</p>
<p>Example:</p>
<pre><code class="language-php">that(last_value(['a', 'b', 'c']))-&gt;isSame('c');
that(last_value([], 999))-&gt;isSame(999);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$default = null</td>
				<td class="desc"><p>無かった場合のデフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>最後の値</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L255-L289" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::last_keyvalue()" tabindex="-1" class="structure-title ">
                        last_keyvalue                        	<small>($array, $default = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の最後のキー/値ペアをタプルで返す</p>
<p>空の場合は $default を返す。</p>
<p>Example:</p>
<pre><code class="language-php">that(last_keyvalue(['a', 'b', 'c']))-&gt;isSame([2, 'c']);
that(last_keyvalue([], 999))-&gt;isSame(999);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$default = null</td>
				<td class="desc"><p>無かった場合のデフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>[最後のキー, 最後の値]</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L291-L323" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::prev_key()" tabindex="-1" class="structure-title ">
                        prev_key                        	<small>($array, $key) : string<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>bool<span class="type-separator"></span><wbr>null</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の指定キーの前のキーを返す</p>
<p>$key が最初のキーだった場合は null を返す。<br />
$key が存在しない場合は false を返す。</p>
<p>Example:</p>
<pre><code class="language-php">$array = ['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'];
// 'b' キーの前は 'a'
that(prev_key($array, 'b'))-&gt;isSame('a');
// 'a' キーの前は無いので null
that(prev_key($array, 'a'))-&gt;isSame(null);
// 'x' キーはそもそも存在しないので false
that(prev_key($array, 'x'))-&gt;isSame(false);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>int</td>
				<td class="rest">$key</td>
				<td class="desc"><p>調べるキー</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>bool<span class="type-separator"></span><wbr>null</td>
			<td class="desc"><p>$key の前のキー</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L325-L375" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::next_key()" tabindex="-1" class="structure-title ">
                        next_key                        	<small>($array, $key = null) : string<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>bool<span class="type-separator"></span><wbr>null</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の指定キーの次のキーを返す</p>
<p>$key が最後のキーだった場合は null を返す。<br />
$key が存在しない場合は false を返す。<br />
$key が未指定だと「次に生成されるキー」（$array[]='hoge' で生成されるキー）を返す。</p>
<p>$array[] = 'hoge' で作成されるキーには完全準拠しない（標準は unset すると結構乱れる）。公式マニュアルを参照。</p>
<p>Example:</p>
<pre><code class="language-php">$array = [9 =&gt; 9, 'a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'];
// 'b' キーの次は 'c'
that(next_key($array, 'b'))-&gt;isSame('c');
// 'c' キーの次は無いので null
that(next_key($array, 'c'))-&gt;isSame(null);
// 'x' キーはそもそも存在しないので false
that(next_key($array, 'x'))-&gt;isSame(false);
// 次に生成されるキーは 10
that(next_key($array, null))-&gt;isSame(10);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$key = null</td>
				<td class="desc"><p>調べるキー</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>bool<span class="type-separator"></span><wbr>null</td>
			<td class="desc"><p>$key の次のキー</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L377-L410" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::in_array_and()" tabindex="-1" class="structure-title ">
                        in_array_and                        	<small>($needle, $haystack, $strict = false) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>in_array の複数版（AND）</p>
<p>配列 $haystack が $needle の「すべてを含む」ときに true を返す。</p>
<p>$needle が非配列の場合は配列化される。<br />
$needle が空の場合は常に false を返す。</p>
<p>Example:</p>
<pre><code class="language-php">that(in_array_and([1], [1, 2, 3]))-&gt;isTrue();
that(in_array_and([9], [1, 2, 3]))-&gt;isFalse();
that(in_array_and([1, 9], [1, 2, 3]))-&gt;isFalse();
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr>mixed</td>
				<td class="rest">$needle</td>
				<td class="desc"><p>調べる値</p>
</td>
			</tr>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$haystack</td>
				<td class="desc"><p>調べる配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$strict = false</td>
				<td class="desc"><p>厳密フラグ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>$needle のすべてが含まれているなら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L412-L445" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::in_array_or()" tabindex="-1" class="structure-title ">
                        in_array_or                        	<small>($needle, $haystack, $strict = false) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>in_array の複数版（OR）</p>
<p>配列 $haystack が $needle の「どれかを含む」ときに true を返す。</p>
<p>$needle が非配列の場合は配列化される。<br />
$needle が空の場合は常に false を返す。</p>
<p>Example:</p>
<pre><code class="language-php">that(in_array_or([1], [1, 2, 3]))-&gt;isTrue();
that(in_array_or([9], [1, 2, 3]))-&gt;isFalse();
that(in_array_or([1, 9], [1, 2, 3]))-&gt;isTrue();
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr>mixed</td>
				<td class="rest">$needle</td>
				<td class="desc"><p>調べる値</p>
</td>
			</tr>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$haystack</td>
				<td class="desc"><p>調べる配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$strict = false</td>
				<td class="desc"><p>厳密フラグ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>$needle のどれかが含まれているなら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L447-L514" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::kvsort()" tabindex="-1" class="structure-title ">
                        kvsort                        	<small>($array, $comparator = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>比較関数にキーも渡ってくる安定ソート</p>
<p>比較関数は ($avalue, $bvalue, $akey, $bkey) という引数を取る。<br />
「値で比較して同値だったらキーも見たい」という状況はまれによくあるはず。<br />
さらに安定ソートであり、同値だとしても元の並び順は維持される。</p>
<p>$comparator は省略できる。省略した場合、型に基づいてよしなにソートする。<br />
（が、比較のたびに型チェックが入るので指定したほうが高速に動く）。</p>
<p>ただし、標準のソート関数とは異なり、参照渡しではなくソートして返り値で返す。<br />
また、いわゆる asort であり、キー・値は常に維持される。</p>
<p>Example:</p>
<pre><code class="language-php">$array = [
    'a'  =&gt; 3,
    'b'  =&gt; 1,
    'c'  =&gt; 2,
    'x1' =&gt; 9,
    'x2' =&gt; 9,
    'x3' =&gt; 9,
];
// 普通のソート
that(kvsort($array))-&gt;isSame([
    'b'  =&gt; 1,
    'c'  =&gt; 2,
    'a'  =&gt; 3,
    'x1' =&gt; 9,
    'x2' =&gt; 9,
    'x3' =&gt; 9,
]);
// キーを使用したソート
that(kvsort($array, fn($av, $bv, $ak, $bk) =&gt; strcmp($bk, $ak)))-&gt;isSame([
    'x3' =&gt; 9,
    'x2' =&gt; 9,
    'x1' =&gt; 9,
    'c'  =&gt; 2,
    'b'  =&gt; 1,
    'a'  =&gt; 3,
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable<span class="type-separator"></span><wbr>array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$comparator = null</td>
				<td class="desc"><p>比較関数。SORT_XXX も使える</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>ソートされた配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L516-L537" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_add()" tabindex="-1" class="structure-title ">
                        array_add                        	<small>(...$variadic) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の+演算子の関数版</p>
<p>Example:</p>
<pre><code class="language-php">// ただの加算の関数版なので同じキーは上書きされない
that(array_add(['a', 'b', 'c'], ['X']))-&gt;isSame(['a', 'b', 'c']);
// 異なるキーは生える
that(array_add(['a', 'b', 'c'], ['x' =&gt; 'X']))-&gt;isSame(['a', 'b', 'c', 'x' =&gt; 'X']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">...$variadic</td>
				<td class="desc"><p>足す配列（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>足された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L539-L568" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_append()" tabindex="-1" class="structure-title ">
                        array_append                        	<small>($array, $value, $key = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の末尾に要素を追加する</p>
<p>array_push のキーが指定できる参照渡しでない版と言える。<br />
キー指定でかつそのキーが存在するとき、値を変えつつ末尾に移動する動作となる。</p>
<p>Example:</p>
<pre><code class="language-php">// キー未指定は言語機構を利用して末尾に追加される
that(array_append([1, 2, 3], 99))-&gt;is([1, 2, 3, 99]);
// キーを指定すればそのキーで生える
that(array_append([1, 2, 3], 99, 'newkey'))-&gt;is([1, 2, 3, 'newkey' =&gt; 99]);
// 存在する場合は値が変わって末尾に移動する
that(array_append([1, 2, 3], 99, 1))-&gt;is([0 =&gt; 1, 2 =&gt; 3, 1 =&gt; 99]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type"></td>
				<td class="rest">$value</td>
				<td class="desc"></td>
			</tr>
        			<tr>
				<td class="type"></td>
				<td class="rest">$key = null</td>
				<td class="desc"></td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>要素が追加された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L570-L599" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_prepend()" tabindex="-1" class="structure-title ">
                        array_prepend                        	<small>($array, $value, $key = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の先頭に要素を追加する</p>
<p>array_unshift のキーが指定できる参照渡しでない版と言える。<br />
配列の数値キーは振り直される。<br />
キー指定でかつそのキーが存在するとき、値を変えつつ先頭に移動する動作となる。</p>
<p>Example:</p>
<pre><code class="language-php">// キー未指定は0で挿入される
that(array_prepend([1, 2, 3], 99))-&gt;is([99, 1, 2, 3]);
// キーを指定すればそのキーで生える
that(array_prepend([1, 2, 3], 99, 'newkey'))-&gt;is(['newkey' =&gt; 99, 1, 2, 3]);
// 存在する場合は値が変わって先頭に移動する
that(array_prepend([1, 2, 3], 99, 1))-&gt;is([1 =&gt; 99, 0 =&gt; 1, 2 =&gt; 3]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type"></td>
				<td class="rest">$value</td>
				<td class="desc"></td>
			</tr>
        			<tr>
				<td class="type"></td>
				<td class="rest">$key = null</td>
				<td class="desc"></td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>要素が追加された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L601-L657" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_merge2()" tabindex="-1" class="structure-title ">
                        array_merge2                        	<small>(...$arrays) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列をマージして通常配列＋αで返す</p>
<p>キー・値が維持される点で array_merge とは異なる（振り直しをせず数値配列で返す）。<br />
きちんと0からの連番で構成される点で配列の加算とは異なる。<br />
要するに「できるだけキーが自然数（の並び）になるように」マージする。</p>
<p>歯抜けはそのまま維持され、文字キーは後ろに追加される（負数キーも同様）。</p>
<p>Example:</p>
<pre><code class="language-php">// キーが入り乱れているがよく見ると通し番号が振られている配列をマージ
that(array_merge2([4 =&gt; 4, 1 =&gt; 1], [0 =&gt; 0], [5 =&gt; 5, 2 =&gt; 2, 3 =&gt; 3]))-&gt;isSame([0, 1, 2, 3, 4, 5]);
// 歯抜けの配列をマージ
that(array_merge2([4 =&gt; 4, 1 =&gt; 1], [0 =&gt; 0], [5 =&gt; 5, 3 =&gt; 3]))-&gt;isSame([0, 1, 3 =&gt; 3, 4 =&gt; 4, 5 =&gt; 5]);
// 負数や文字キーは後ろに追いやられる
that(array_merge2(['a' =&gt; 'A', 1 =&gt; 1], [0 =&gt; 0], [-1 =&gt; 'X', 2 =&gt; 2, 3 =&gt; 3]))-&gt;isSame([0, 1, 2, 3, -1 =&gt; 'X', 'a' =&gt; 'A']);
// 同じキーは後ろ優先
that(array_merge2([0, 'a' =&gt; 'A0'], [1, 'a' =&gt; 'A1'], [2, 'a' =&gt; 'A2']))-&gt;isSame([2, 'a' =&gt; 'A2']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">...$arrays</td>
				<td class="desc"><p>マージする配列</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>マージされた配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L659-L711" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_mix()" tabindex="-1" class="structure-title ">
                        array_mix                        	<small>(...$variadic) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列を交互に追加する</p>
<p>引数の配列を横断的に追加して返す。<br />
数値キーは振り直される。文字キーはそのまま追加される（同じキーは後方上書き）。</p>
<p>配列の長さが異なる場合、短い方に対しては何もしない。そのまま追加される。</p>
<p>Example:</p>
<pre><code class="language-php">// 奇数配列と偶数配列をミックスして自然数配列を生成
that(array_mix([1, 3, 5], [2, 4, 6]))-&gt;isSame([1, 2, 3, 4, 5, 6]);
// 長さが異なる場合はそのまま追加される（短い方の足りない分は無視される）
that(array_mix([1], [2, 3, 4]))-&gt;isSame([1, 2, 3, 4]);
that(array_mix([1, 3, 4], [2]))-&gt;isSame([1, 2, 3, 4]);
// 可変引数なので3配列以上も可
that(array_mix([1], [2, 4], [3, 5, 6]))-&gt;isSame([1, 2, 3, 4, 5, 6]);
that(array_mix([1, 4, 6], [2, 5], [3]))-&gt;isSame([1, 2, 3, 4, 5, 6]);
// 文字キーは維持される
that(array_mix(['a' =&gt; 'A', 1, 3], ['b' =&gt; 'B', 2]))-&gt;isSame(['a' =&gt; 'A', 'b' =&gt; 'B', 1, 2, 3]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">...$variadic</td>
				<td class="desc"><p>対象配列（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>引数配列が交互に追加された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L713-L785" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_zip()" tabindex="-1" class="structure-title ">
                        array_zip                        	<small>(...$arrays) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の各要素値で順番に配列を作る</p>
<p><code>array_map(null, ...$arrays)</code> とほぼ同義。ただし</p>
<ul>
<li>文字キーは保存される（数値キーは再割り振りされる）</li>
<li>一つだけ配列を与えても構造は壊れない（array_map(null) は壊れる）</li>
</ul>
<p>Example:</p>
<pre><code class="language-php">// 普通の zip
that(array_zip(
    [1, 2, 3],
    ['hoge', 'fuga', 'piyo']
))-&gt;is([[1, 'hoge'], [2, 'fuga'], [3, 'piyo']]);
// キーが維持される
that(array_zip(
    ['a' =&gt; 1, 2, 3],
    ['hoge', 'b' =&gt; 'fuga', 'piyo']
))-&gt;is([['a' =&gt; 1, 'hoge'], [2, 'b' =&gt; 'fuga'], [3, 'piyo']]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">...$arrays</td>
				<td class="desc"><p>対象配列（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>各要素値の配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L787-L830" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_cross()" tabindex="-1" class="structure-title ">
                        array_cross                        	<small>(...$arrays) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の直積を返す</p>
<p>文字キーは保存されるが数値キーは再割り振りされる。<br />
ただし、文字キーが重複すると例外を投げる。</p>
<p>Example:</p>
<pre><code class="language-php">// 普通の直積
that(array_cross(
    [1, 2],
    [3, 4]
))-&gt;isSame([[1, 3], [1, 4], [2, 3], [2, 4]]);
// キーが維持される
that(array_cross(
    ['a' =&gt; 1, 2],
    ['b' =&gt; 3, 4]
))-&gt;isSame([['a' =&gt; 1, 'b' =&gt; 3], ['a' =&gt; 1, 4], [2, 'b' =&gt; 3], [2, 4]]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">...$arrays</td>
				<td class="desc"><p>対象配列（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>各配列値の直積</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L832-L871" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_implode()" tabindex="-1" class="structure-title ">
                        array_implode                        	<small>($array, $glue) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の各要素の間に要素を差し込む</p>
<p>歴史的な理由はないが、引数をどちらの順番でも受けつけることが可能。<br />
ただし、$glue を先に渡すパターンの場合は配列指定が可変引数渡しになる。</p>
<p>文字キーは保存されるが数値キーは再割り振りされる。</p>
<p>Example:</p>
<pre><code class="language-php">// (配列, 要素) の呼び出し
that(array_implode(['a', 'b', 'c'], 'X'))-&gt;isSame(['a', 'X', 'b', 'X', 'c']);
// (要素, ...配列) の呼び出し
that(array_implode('X', 'a', 'b', 'c'))-&gt;isSame(['a', 'X', 'b', 'X', 'c']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable<span class="type-separator"></span><wbr>string</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$glue</td>
				<td class="desc"><p>差し込む要素</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>差し込まれた配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L873-L945" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_explode()" tabindex="-1" class="structure-title ">
                        array_explode                        	<small>($array, $condition, $limit = PHP_INT_MAX) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列を指定条件で分割する</p>
<p>文字列の explode を更に一階層掘り下げたイメージ。<br />
$condition で指定された要素は結果配列に含まれない。</p>
<p>$condition にはクロージャが指定できる。クロージャの場合は true 相当を返した場合に分割要素とみなされる。<br />
引数は (値, キー)の順番。</p>
<p>$limit に負数を与えると「その絶対値-1までを結合したものと残り」を返す。<br />
端的に言えば「正数を与えると後詰めでその個数で返す」「負数を与えると前詰めでその（絶対値）個数で返す」という動作になる。</p>
<p>Example:</p>
<pre><code class="language-php">// null 要素で分割
that(array_explode(['a', null, 'b', 'c'], null))-&gt;isSame([['a'], [2 =&gt; 'b', 3 =&gt; 'c']]);
// クロージャで分割（大文字で分割）
that(array_explode(['a', 'B', 'c', 'D', 'e'], fn($v) =&gt; ctype_upper($v)))-&gt;isSame([['a'], [2 =&gt; 'c'], [4 =&gt; 'e']]);
// 負数指定
that(array_explode(['a', null, 'b', null, 'c'], null, -2))-&gt;isSame([[0 =&gt; 'a', 1 =&gt; null, 2 =&gt; 'b'], [4 =&gt; 'c']]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$condition</td>
				<td class="desc"><p>分割条件</p>
</td>
			</tr>
        			<tr>
				<td class="type">int</td>
				<td class="rest">$limit = PHP_INT_MAX</td>
				<td class="desc"><p>最大分割数</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>分割された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L947-L1002" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_sprintf()" tabindex="-1" class="structure-title ">
                        array_sprintf                        	<small>($array, $format = null, $glue = null) : array<span class="type-separator"></span><wbr>string</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>キーと値で sprintf する</p>
<p>配列の各要素を文字列化して返すイメージ。<br />
$glue を与えるとさらに implode して返す（返り値が文字列になる）。</p>
<p>$format は書式文字列（$v, $k）。<br />
callable を与えると sprintf ではなくコールバック処理になる（$v, $k）。<br />
省略（null）するとキーを format 文字列、値を引数として <strong>vsprintf</strong> する。</p>
<p>Example:</p>
<pre><code class="language-php">$array = ['key1' =&gt; 'val1', 'key2' =&gt; 'val2'];
// key, value を利用した sprintf
that(array_sprintf($array, '%2$s=%1$s'))-&gt;isSame(['key1=val1', 'key2=val2']);
// 第3引数を与えるとさらに implode される
that(array_sprintf($array, '%2$s=%1$s', ' '))-&gt;isSame('key1=val1 key2=val2');
// クロージャを与えるとコールバック動作になる
$closure = fn($v, $k) =&gt; "$k=" . strtoupper($v);
that(array_sprintf($array, $closure, ' '))-&gt;isSame('key1=VAL1 key2=VAL2');
// 省略すると vsprintf になる
that(array_sprintf([
    'str:%s,int:%d' =&gt; ['sss', '3.14'],
    'single:%s'     =&gt; 'str',
], null, '|'))-&gt;isSame('str:sss,int:3|single:str');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>callable<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$format = null</td>
				<td class="desc"><p>書式文字列あるいはクロージャ</p>
</td>
			</tr>
        			<tr>
				<td class="type">?string</td>
				<td class="rest">$glue = null</td>
				<td class="desc"><p>結合文字列。未指定時は implode しない</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array<span class="type-separator"></span><wbr>string</td>
			<td class="desc"><p>sprintf された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1004-L1050" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_strpad()" tabindex="-1" class="structure-title ">
                        array_strpad                        	<small>($array, $key_prefix, $val_prefix = &quot;&quot;) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列のキー・要素に文字列を付加する</p>
<p>$key_prefix, $val_prefix でそれぞれ「キーに付与する文字列」「値に付与する文字列」が指定できる。<br />
配列を与えると [サフィックス, プレフィックス] という意味になる。<br />
デフォルト（ただの文字列）はプレフィックス（値だけに付与したいなら array_map で十分なので）。</p>
<p>Example:</p>
<pre><code class="language-php">$array = ['key1' =&gt; 'val1', 'key2' =&gt; 'val2'];
// キーにプレフィックス付与
that(array_strpad($array, 'prefix-'))-&gt;isSame(['prefix-key1' =&gt; 'val1', 'prefix-key2' =&gt; 'val2']);
// 値にサフィックス付与
that(array_strpad($array, '', ['-suffix']))-&gt;isSame(['key1' =&gt; 'val1-suffix', 'key2' =&gt; 'val2-suffix']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>array</td>
				<td class="rest">$key_prefix</td>
				<td class="desc"><p>キー側の付加文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>array</td>
				<td class="rest">$val_prefix = &quot;&quot;</td>
				<td class="desc"><p>値側の付加文字列</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>文字列付与された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1052-L1092" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_pos()" tabindex="-1" class="structure-title ">
                        array_pos                        	<small>($array, $position, $return_key = false) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列・連想配列を問わず「N番目(0ベース)」の要素を返す</p>
<p>負数を与えると逆から N 番目となる。</p>
<p>Example:</p>
<pre><code class="language-php">that(array_pos([1, 2, 3], 1))-&gt;isSame(2);
that(array_pos([1, 2, 3], -1))-&gt;isSame(3);
that(array_pos(['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'], 1))-&gt;isSame('B');
that(array_pos(['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'], 1, true))-&gt;isSame('b');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">int</td>
				<td class="rest">$position</td>
				<td class="desc"><p>取得する位置</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$return_key = false</td>
				<td class="desc"><p>true にすると値ではなくキーを返す</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>指定位置の値</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1094-L1125" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_pos_key()" tabindex="-1" class="structure-title ">
                        array_pos_key                        	<small>($array, $key, $default = null) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の指定キーの位置を返す</p>
<p>Example:</p>
<pre><code class="language-php">that(array_pos_key(['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'], 'c'))-&gt;isSame(2);
that(array_pos_key(['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'], 'x', -1))-&gt;isSame(-1);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>int</td>
				<td class="rest">$key</td>
				<td class="desc"><p>取得する位置</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$default = null</td>
				<td class="desc"><p>見つからなかったときのデフォルト値。指定しないと例外</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>指定キーの位置</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1127-L1150" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_of()" tabindex="-1" class="structure-title ">
                        array_of                        	<small>($key, $default = null) : <a href="http://php.net/manual/ja/class.closure.php" class="fqsen" target="_blank">\Closure</a></small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列を与えると指定キーの値を返すクロージャを返す</p>
<p>存在しない場合は $default を返す。</p>
<p>$key に配列を与えるとそれらの値の配列を返す（lookup 的な動作）。<br />
その場合、$default が活きるのは「全て無かった場合」となる。<br />
さらに $key が配列の場合に限り、 $default を省略すると空配列として動作する。</p>
<p>Example:</p>
<pre><code class="language-php">$fuga_of_array = array_of('fuga');
that($fuga_of_array(['hoge' =&gt; 'HOGE', 'fuga' =&gt; 'FUGA']))-&gt;isSame('FUGA');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>array</td>
				<td class="rest">$key</td>
				<td class="desc"><p>取得したいキー</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$default = null</td>
				<td class="desc"><p>デフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type"><a href="http://php.net/manual/ja/class.closure.php" class="fqsen" target="_blank">\Closure</a></td>
			<td class="desc"><p>$key の値を返すクロージャ</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1152-L1229" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_get()" tabindex="-1" class="structure-title ">
                        array_get                        	<small>($array, $key, $default = null) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>デフォルト値付きの配列値取得</p>
<p>存在しない場合は $default を返す。</p>
<p>$key に配列を与えるとそれらの値の配列を返す（lookup 的な動作）。<br />
その場合、$default が活きるのは「全て無かった場合」となる。</p>
<p>さらに $key が配列の場合に限り、 $default を省略すると空配列として動作する。</p>
<p>同様に、$key にクロージャを与えると、その返り値が true 相当のものを返す。<br />
その際、 $default が配列なら一致するものを配列で返し、配列でないなら単値で返す。</p>
<p>Example:</p>
<pre><code class="language-php">// 単純取得
that(array_get(['a', 'b', 'c'], 1))-&gt;isSame('b');
// 単純デフォルト
that(array_get(['a', 'b', 'c'], 9, 999))-&gt;isSame(999);
// 配列取得
that(array_get(['a', 'b', 'c'], [0, 2]))-&gt;isSame([0 =&gt; 'a', 2 =&gt; 'c']);
// 配列部分取得
that(array_get(['a', 'b', 'c'], [0, 9]))-&gt;isSame([0 =&gt; 'a']);
// 配列デフォルト（null ではなく [] を返す）
that(array_get(['a', 'b', 'c'], [9]))-&gt;isSame([]);
// クロージャ指定＆単値（コールバックが true を返す最初の要素）
that(array_get(['a', 'b', 'c'], fn($v) =&gt; in_array($v, ['b', 'c'])))-&gt;isSame('b');
// クロージャ指定＆配列（コールバックが true を返すもの）
that(array_get(['a', 'b', 'c'], fn($v) =&gt; in_array($v, ['b', 'c']), []))-&gt;isSame([1 =&gt; 'b', 2 =&gt; 'c']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>array<span class="type-separator"></span><wbr><a href="http://php.net/manual/ja/class.closure.php" class="fqsen" target="_blank">\Closure</a></td>
				<td class="rest">$key</td>
				<td class="desc"><p>取得したいキー。配列を与えると全て返す。クロージャの場合は true 相当を返す</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$default = null</td>
				<td class="desc"><p>無かった場合のデフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>指定したキーの値</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1231-L1283" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_set()" tabindex="-1" class="structure-title ">
                        array_set                        	<small>(&amp;$array, $value, $key = null, $require_return = true) : string<span class="type-separator"></span><wbr>int</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>キー指定の配列値設定</p>
<p>第3引数を省略すると（null を与えると）言語機構を使用して配列の最後に設定する（$array[] = $value）。<br />
第3引数に配列を指定すると潜って設定する。</p>
<p>Example:</p>
<pre><code class="language-php">$array = ['a' =&gt; 'A', 'B'];
// 第3引数省略（最後に連番キーで設定）
that(array_set($array, 'Z'))-&gt;isSame(1);
that($array)-&gt;isSame(['a' =&gt; 'A', 'B', 'Z']);
// 第3引数でキーを指定
that(array_set($array, 'Z', 'z'))-&gt;isSame('z');
that($array)-&gt;isSame(['a' =&gt; 'A', 'B', 'Z', 'z' =&gt; 'Z']);
that(array_set($array, 'Z', 'z'))-&gt;isSame('z');
// 第3引数で配列を指定
that(array_set($array, 'Z', ['x', 'y', 'z']))-&gt;isSame('z');
that($array)-&gt;isSame(['a' =&gt; 'A', 'B', 'Z', 'z' =&gt; 'Z', 'x' =&gt; ['y' =&gt; ['z' =&gt; 'Z']]]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">&amp;$array</td>
				<td class="desc"><p>配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$value</td>
				<td class="desc"><p>設定する値</p>
</td>
			</tr>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr>string<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$key = null</td>
				<td class="desc"><p>設定するキー</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$require_return = true</td>
				<td class="desc"><p>返り値が不要なら false を渡す</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string<span class="type-separator"></span><wbr>int</td>
			<td class="desc"><p>設定したキー</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1285-L1357" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_put()" tabindex="-1" class="structure-title ">
                        array_put                        	<small>(&amp;$array, $value, $key = null, $condition = null) : string<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>false</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>キー指定の配列値設定</p>
<p>array_set とほとんど同じ。<br />
第3引数を省略すると（null を与えると）言語機構を使用して配列の最後に設定する（$array[] = $value）。<br />
また、<strong>int を与えても同様の動作</strong>となる。<br />
第3引数に配列を指定すると潜って設定する。</p>
<p>第4引数で追加する条件クロージャを指定できる。<br />
クロージャには <code>(追加する要素, 追加するキー, 追加される元配列)</code> が渡ってくる。<br />
このクロージャが false 相当を返した時は追加されないようになる。</p>
<p>array_set における $require_return は廃止している。<br />
これはもともと end や last_key が遅かったのでオプショナルにしていたが、もう改善しているし、7.3 から array_key_last があるので、呼び元で適宜使えば良い。</p>
<p>Example:</p>
<pre><code class="language-php">$array = ['a' =&gt; 'A', 'B'];
// 第3引数 int
that(array_put($array, 'Z', 999))-&gt;isSame(1);
that($array)-&gt;isSame(['a' =&gt; 'A', 'B', 'Z']);
// 第3引数省略（最後に連番キーで設定）
that(array_put($array, 'Z'))-&gt;isSame(2);
that($array)-&gt;isSame(['a' =&gt; 'A', 'B', 'Z', 'Z']);
// 第3引数でキーを指定
that(array_put($array, 'Z', 'z'))-&gt;isSame('z');
that($array)-&gt;isSame(['a' =&gt; 'A', 'B', 'Z', 'Z', 'z' =&gt; 'Z']);
that(array_put($array, 'Z', 'z'))-&gt;isSame('z');
// 第3引数で配列を指定
that(array_put($array, 'Z', ['x', 'y', 'z']))-&gt;isSame('z');
that($array)-&gt;isSame(['a' =&gt; 'A', 'B', 'Z', 'Z', 'z' =&gt; 'Z', 'x' =&gt; ['y' =&gt; ['z' =&gt; 'Z']]]);
// 第4引数で条件を指定（キーが存在するなら追加しない）
that(array_put($array, 'Z', 'z', fn($v, $k, $array) =&gt; !isset($array[$k])))-&gt;isSame(false);
// 第4引数で条件を指定（値が存在するなら追加しない）
that(array_put($array, 'Z', null, fn($v, $k, $array) =&gt; !in_array($v, $array)))-&gt;isSame(false);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">&amp;$array</td>
				<td class="desc"><p>配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$value</td>
				<td class="desc"><p>設定する値</p>
</td>
			</tr>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr>string<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$key = null</td>
				<td class="desc"><p>設定するキー</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$condition = null</td>
				<td class="desc"><p>追加する条件</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>false</td>
			<td class="desc"><p>設定したキー</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1359-L1443" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_unset()" tabindex="-1" class="structure-title ">
                        array_unset                        	<small>(&amp;$array, $key, $default = null) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>伏せると同時にその値を返す</p>
<p>$key に配列を与えると全て伏せて配列で返す。<br />
その場合、$default が活きるのは「全て無かった場合」となる。</p>
<p>さらに $key が配列の場合に限り、 $default を省略すると空配列として動作する。</p>
<p>配列を与えた場合の返り値は与えた配列の順番・キーが活きる。<br />
これを利用すると list の展開の利便性が上がったり、連想配列で返すことができる。</p>
<p>同様に、$key にクロージャを与えると、その返り値が true 相当のものを伏せて配列で返す。<br />
callable ではなくクロージャのみ対応する。</p>
<p>Example:</p>
<pre><code class="language-php">$array = ['a' =&gt; 'A', 'b' =&gt; 'B'];
// ない場合は $default を返す
that(array_unset($array, 'x', 'X'))-&gt;isSame('X');
// 指定したキーを返す。そのキーは伏せられている
that(array_unset($array, 'a'))-&gt;isSame('A');
that($array)-&gt;isSame(['b' =&gt; 'B']);

$array = ['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'];
// 配列を与えるとそれらを返す。そのキーは全て伏せられている
that(array_unset($array, ['a', 'b', 'x']))-&gt;isSame(['A', 'B']);
that($array)-&gt;isSame(['c' =&gt; 'C']);

$array = ['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'];
// 配列のキーは返されるキーを表す。順番も維持される
that(array_unset($array, ['x2' =&gt; 'b', 'x1' =&gt; 'a']))-&gt;isSame(['x2' =&gt; 'B', 'x1' =&gt; 'A']);

$array = ['hoge' =&gt; 'HOGE', 'fuga' =&gt; 'FUGA', 'piyo' =&gt; 'PIYO'];
// 値に "G" を含むものを返す。その要素は伏せられている
that(array_unset($array, fn($v) =&gt; strpos($v, 'G') !== false))-&gt;isSame(['hoge' =&gt; 'HOGE', 'fuga' =&gt; 'FUGA']);
that($array)-&gt;isSame(['piyo' =&gt; 'PIYO']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">&amp;$array</td>
				<td class="desc"><p>配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>array<span class="type-separator"></span><wbr>callable</td>
				<td class="rest">$key</td>
				<td class="desc"><p>伏せたいキー。配列を与えると全て伏せる。クロージャの場合は true 相当を伏せる</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$default = null</td>
				<td class="desc"><p>無かった場合のデフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>指定したキーの値</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1445-L1484" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_dive()" tabindex="-1" class="structure-title ">
                        array_dive                        	<small>($array, $path, $default = null, $delimiter = &quot;.&quot;) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>パス形式で配列値を取得</p>
<p>存在しない場合は $default を返す。</p>
<p>Example:</p>
<pre><code class="language-php">$array = [
    'a' =&gt; [
        'b' =&gt; [
            'c' =&gt; 'vvv'
        ]
    ]
];
that(array_dive($array, 'a.b.c'))-&gt;isSame('vvv');
that(array_dive($array, 'a.b.x', 9))-&gt;isSame(9);
// 配列を与えても良い。その場合 $delimiter 引数は意味をなさない
that(array_dive($array, ['a', 'b', 'c']))-&gt;isSame('vvv');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>調べる配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>array</td>
				<td class="rest">$path</td>
				<td class="desc"><p>パス文字列。配列も与えられる</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$default = null</td>
				<td class="desc"><p>無かった場合のデフォルト値</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$delimiter = &quot;.&quot;</td>
				<td class="desc"><p>パスの区切り文字。大抵は '.' か '/'</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>パスが示す配列の値</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1486-L1539" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_keys_exist()" tabindex="-1" class="structure-title ">
                        array_keys_exist                        	<small>($keys, $array) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>array_key_exists の複数版</p>
<p>指定キーが全て存在するなら true を返す。<br />
配列ではなく単一文字列を与えても動作する（array_key_exists と全く同じ動作になる）。</p>
<p>$keys に空を与えると例外を投げる。<br />
$keys に配列を与えるとキーで潜ってチェックする（Example 参照）。</p>
<p>Example:</p>
<pre><code class="language-php">// すべて含むので true
that(array_keys_exist(['a', 'b', 'c'], ['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C']))-&gt;isTrue();
// N は含まないので false
that(array_keys_exist(['a', 'b', 'N'], ['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C']))-&gt;isFalse();
// 配列を与えると潜る（日本語で言えば「a というキーと、x というキーとその中に x1, x2 というキーがあるか？」）
that(array_keys_exist(['a', 'x' =&gt; ['x1', 'x2']], ['a' =&gt; 'A', 'x' =&gt; ['x1' =&gt; 'X1', 'x2' =&gt; 'X2']]))-&gt;isTrue();
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr>string</td>
				<td class="rest">$keys</td>
				<td class="desc"><p>調べるキー</p>
</td>
			</tr>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr><a href="http://php.net/manual/ja/class.arrayaccess.php" class="fqsen" target="_blank">\ArrayAccess</a></td>
				<td class="rest">$array</td>
				<td class="desc"><p>調べる配列</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>指定キーが全て存在するなら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1541-L1580" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_find()" tabindex="-1" class="structure-title ">
                        array_find                        	<small>($array, $callback, $is_key = true) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>array_search のクロージャ版のようなもの</p>
<p>コールバックの返り値が true 相当のものを返す。<br />
$is_key に true を与えるとそのキーを返す（デフォルトの動作）。<br />
$is_key に false を与えるとコールバックの結果を返す。</p>
<p>この関数は論理値 FALSE を返す可能性がありますが、FALSE として評価される値を返す可能性もあります。</p>
<p>Example:</p>
<pre><code class="language-php">// 最初に見つかったキーを返す
that(array_find(['a', 'b', '9'], 'ctype_digit'))-&gt;isSame(2);
that(array_find(['a', 'b', '9'], fn($v) =&gt; $v === 'b'))-&gt;isSame(1);
// 最初に見つかったコールバック結果を返す（最初の数字の2乗を返す）
$ifnumeric2power = fn($v) =&gt; ctype_digit($v) ? $v * $v : false;
that(array_find(['a', 'b', '9'], $ifnumeric2power, false))-&gt;isSame(81);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>調べる配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>評価コールバック</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$is_key = true</td>
				<td class="desc"><p>キーを返すか否か</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>コールバックが true を返した最初のキー。存在しなかったら false</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1582-L1635" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_rekey()" tabindex="-1" class="structure-title ">
                        array_rekey                        	<small>($array, $keymap) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>キーをマップ配列・callable で置換する</p>
<p>変換先・返り値が null だとその要素は取り除かれる。<br />
callable 指定時の引数は <code>(キー, 値, 連番インデックス, 対象配列そのもの)</code> が渡ってくる。</p>
<p>Example:</p>
<pre><code class="language-php">$array = ['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'];
// a は x に c は z に置換される
that(array_rekey($array, ['a' =&gt; 'x', 'c' =&gt; 'z']))-&gt;isSame(['x' =&gt; 'A', 'b' =&gt; 'B', 'z' =&gt; 'C']);
// b は削除され c は z に置換される
that(array_rekey($array, ['b' =&gt; null, 'c' =&gt; 'z']))-&gt;isSame(['a' =&gt; 'A', 'z' =&gt; 'C']);
// キーの交換にも使える（a ⇔ c）
that(array_rekey($array, ['a' =&gt; 'c', 'c' =&gt; 'a']))-&gt;isSame(['c' =&gt; 'A', 'b' =&gt; 'B', 'a' =&gt; 'C']);
// callable
that(array_rekey($array, 'strtoupper'))-&gt;isSame(['A' =&gt; 'A', 'B' =&gt; 'B', 'C' =&gt; 'C']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr>callable</td>
				<td class="rest">$keymap</td>
				<td class="desc"><p>マップ配列かキーを返すクロージャ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>キーが置換された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1637-L1661" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_grep_key()" tabindex="-1" class="structure-title ">
                        array_grep_key                        	<small>($array, $regex, $not = false) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>キーを正規表現でフィルタする</p>
<p>Example:</p>
<pre><code class="language-php">that(array_grep_key(['a' =&gt; 'A', 'aa' =&gt; 'AA', 'b' =&gt; 'B'], '#^a#'))-&gt;isSame(['a' =&gt; 'A', 'aa' =&gt; 'AA']);
that(array_grep_key(['a' =&gt; 'A', 'aa' =&gt; 'AA', 'b' =&gt; 'B'], '#^a#', true))-&gt;isSame(['b' =&gt; 'B']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$regex</td>
				<td class="desc"><p>正規表現</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$not = false</td>
				<td class="desc"><p>true にすると「マッチしない」でフィルタする</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>正規表現でフィルタされた配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1663-L1749" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_map_recursive()" tabindex="-1" class="structure-title ">
                        array_map_recursive                        	<small>($array, $callback, $iterable = true, $apply_array = false) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>array_map の再帰版</p>
<p>下記の点で少し array_map とは挙動が異なる。</p>
<ul>
<li>配列だけでなく iterable も対象になる（引数で指定可能。デフォルト true）<ul>
<li>つまりオブジェクト構造は維持されず、結果はすべて配列になる</li>
</ul>
</li>
<li>値だけでなくキーも渡ってくる</li>
</ul>
<p>Example:</p>
<pre><code class="language-php">// デフォルトでは array_walk 等と同様に葉のみが渡ってくる（iterable も対象になる）
that(array_map_recursive([
    'k' =&gt; 'v',
    'c' =&gt; new \ArrayObject([
        'k1' =&gt; 'v1',
        'k2' =&gt; 'v2',
    ]),
], 'strtoupper'))-&gt;isSame([
    'k' =&gt; 'V',
    'c' =&gt; [
        'k1' =&gt; 'V1',
        'k2' =&gt; 'V2',
    ],
]);

// ただし、その挙動は引数で変更可能
that(array_map_recursive([
    'k' =&gt; 'v',
    'c' =&gt; new \ArrayObject([
        'k1' =&gt; 'v1',
        'k2' =&gt; 'v2',
    ]),
], 'gettype', false))-&gt;isSame([
    'k' =&gt; 'string',
    'c' =&gt; 'object',
]);

// さらに、自身にも適用できる（呼び出しは子が先で、本当の意味で「すべての要素」で呼び出される）
that((array_map_recursive)([
    'k' =&gt; 'v',
    'c' =&gt; [
        'k1' =&gt; 'v1',
        'k2' =&gt; 'v2',
    ],
], function ($v) {
    // 配列は stdclass 化、それ以外は大文字化
    return is_array($v) ? (object) $v : strtoupper($v);
}, true, true))-&gt;is((object) [
    'k' =&gt; 'V',
    'c' =&gt; (object) [
        'k1' =&gt; 'V1',
        'k2' =&gt; 'V2',
    ],
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>評価クロージャ</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$iterable = true</td>
				<td class="desc"><p>is_iterable で判定するか</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$apply_array = false</td>
				<td class="desc"><p>配列要素にもコールバックを適用するか</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>map された新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1751-L1778" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_map_key()" tabindex="-1" class="structure-title ">
                        array_map_key                        	<small>($array, $callback) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>キーをマップして変換する</p>
<p>$callback が null を返すとその要素は取り除かれる。</p>
<p>Example:</p>
<pre><code class="language-php">that(array_map_key(['a' =&gt; 'A', 'b' =&gt; 'B'], 'strtoupper'))-&gt;isSame(['A' =&gt; 'A', 'B' =&gt; 'B']);
that(array_map_key(['a' =&gt; 'A', 'b' =&gt; 'B'], function () { }))-&gt;isSame([]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>評価クロージャ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>キーが変換された新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1780-L1807" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_filter_key()" tabindex="-1" class="structure-title ">
                        array_filter_key                        	<small>($array, $callback) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>キーを主軸とした array_filter</p>
<p>$callback が要求するなら値も渡ってくる。 php 5.6 の array_filter の ARRAY_FILTER_USE_BOTH と思えばよい。<br />
ただし、完全な互換ではなく、引数順は ($k, $v) なので注意。</p>
<p>Example:</p>
<pre><code class="language-php">that(array_filter_key(['a', 'b', 'c'], fn($k, $v) =&gt; $k !== 1))-&gt;isSame([0 =&gt; 'a', 2 =&gt; 'c']);
that(array_filter_key(['a', 'b', 'c'], fn($k, $v) =&gt; $v !== 'b'))-&gt;isSame([0 =&gt; 'a', 2 =&gt; 'c']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>評価クロージャ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>$callback が true を返した新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1809-L1929" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_where()" tabindex="-1" class="structure-title ">
                        array_where                        	<small>($array, $column = null, $callback = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>指定キーの要素で array_filter する</p>
<p>array_column があるなら array_where があってもいいはず。</p>
<p>$column はコールバックに渡ってくる配列のキー名を渡す。null を与えると行全体が渡ってくる。<br />
$callback は絞り込み条件を渡す。null を与えると true 相当の値でフィルタする。<br />
つまり $column も $callback も省略した場合、実質的に array_filter と同じ動作になる。</p>
<p>$column は配列を受け入れる。配列を渡した場合その値の共通項がコールバックに渡る。<br />
連想配列の場合は「キーのカラム == 値」で filter する（それぞれで AND。厳密かどうかは $callback で指定。説明が難しいので Example を参照）。</p>
<p>$callback が要求するならキーも渡ってくる。</p>
<p>Example:</p>
<pre><code class="language-php">$array = [
    0 =&gt; ['id' =&gt; 1, 'name' =&gt; 'hoge', 'flag' =&gt; false],
    1 =&gt; ['id' =&gt; 2, 'name' =&gt; 'fuga', 'flag' =&gt; true],
    2 =&gt; ['id' =&gt; 3, 'name' =&gt; 'piyo', 'flag' =&gt; false],
];
// 'flag' が true 相当のものだけ返す
that(array_where($array, 'flag'))-&gt;isSame([
    1 =&gt; ['id' =&gt; 2, 'name' =&gt; 'fuga', 'flag' =&gt; true],
]);
// 'name' に 'h' を含むものだけ返す
$contain_h = fn($name) =&gt; strpos($name, 'h') !== false;
that(array_where($array, 'name', $contain_h))-&gt;isSame([
    0 =&gt; ['id' =&gt; 1, 'name' =&gt; 'hoge', 'flag' =&gt; false],
]);
// $callback が引数2つならキーも渡ってくる（キーが 2 のものだけ返す）
$equal_2 = fn($row, $key) =&gt; $key === 2;
that(array_where($array, null, $equal_2))-&gt;isSame([
    2 =&gt; ['id' =&gt; 3, 'name' =&gt; 'piyo', 'flag' =&gt; false],
]);
// $column に配列を渡すと共通項が渡ってくる
$idname_is_2fuga = fn($idname) =&gt; ($idname['id'] . $idname['name']) === '2fuga';
that(array_where($array, ['id', 'name'], $idname_is_2fuga))-&gt;isSame([
    1 =&gt; ['id' =&gt; 2, 'name' =&gt; 'fuga', 'flag' =&gt; true],
]);
// $column に連想配列を渡すと「キーのカラム == 値」で filter する（要するに「name が piyo かつ flag が false」で filter）
that(array_where($array, ['name' =&gt; 'piyo', 'flag' =&gt; false]))-&gt;isSame([
    2 =&gt; ['id' =&gt; 3, 'name' =&gt; 'piyo', 'flag' =&gt; false],
]);
// 上記において値に配列を渡すと in_array で判定される
that(array_where($array, ['id' =&gt; [2, 3]]))-&gt;isSame([
    1 =&gt; ['id' =&gt; 2, 'name' =&gt; 'fuga', 'flag' =&gt; true],
    2 =&gt; ['id' =&gt; 3, 'name' =&gt; 'piyo', 'flag' =&gt; false],
]);
// $column の連想配列の値にはコールバックが渡せる（それぞれで AND）
that(array_where($array, [
    'id'   =&gt; fn($id) =&gt; $id &gt;= 3,                       // id が 3 以上
    'name' =&gt; fn($name) =&gt; strpos($name, 'o') !== false, // name に o を含む
]))-&gt;isSame([
    2 =&gt; ['id' =&gt; 3, 'name' =&gt; 'piyo', 'flag' =&gt; false],
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>array<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$column = null</td>
				<td class="desc"><p>キー名</p>
</td>
			</tr>
        			<tr>
				<td class="type">?callable</td>
				<td class="rest">$callback = null</td>
				<td class="desc"><p>評価クロージャ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>$where が真を返した新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1931-L1962" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_map_filter()" tabindex="-1" class="structure-title ">
                        array_map_filter                        	<small>($array, $callback, $strict = false) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>array_map + array_filter する</p>
<p>コールバックを適用して、結果が true 相当の要素のみ取り出す。<br />
$strict に true を与えると「null でない」要素のみ返される。</p>
<p>$callback が要求するならキーも渡ってくる。</p>
<p>Example:</p>
<pre><code class="language-php">that(array_map_filter([' a ', ' b ', ''], 'trim'))-&gt;isSame(['a', 'b']);
that(array_map_filter([' a ', ' b ', ''], 'trim', true))-&gt;isSame(['a', 'b', '']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>評価クロージャ</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$strict = false</td>
				<td class="desc"><p>厳密比較フラグ。 true だと null のみが偽とみなされる</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>$callback が真を返した新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L1964-L2001" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_map_method()" tabindex="-1" class="structure-title ">
                        array_map_method                        	<small>($array, $method, $args = [], $ignore = false) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>メソッドを指定できるようにした array_map</p>
<p>配列内の要素は全て同一（少なくともシグネチャが同じ $method が存在する）オブジェクトでなければならない。<br />
スルーする場合は $ignore=true とする。スルーした場合 map ではなく filter される（結果配列に含まれない）。<br />
$ignore=null とすると 何もせずそのまま要素を返す。</p>
<p>Example:</p>
<pre><code class="language-php">$exa = new \Exception('a');
$exb = new \Exception('b');
$std = new \stdClass();
// getMessage で map される
that(array_map_method([$exa, $exb], 'getMessage'))-&gt;isSame(['a', 'b']);
// getMessage で map されるが、メソッドが存在しない場合は取り除かれる
that(array_map_method([$exa, $exb, $std, null], 'getMessage', [], true))-&gt;isSame(['a', 'b']);
// getMessage で map されるが、メソッドが存在しない場合はそのまま返す
that(array_map_method([$exa, $exb, $std, null], 'getMessage', [], null))-&gt;isSame(['a', 'b', $std, null]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$method</td>
				<td class="desc"><p>メソッド</p>
</td>
			</tr>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$args = []</td>
				<td class="desc"><p>メソッドに渡る引数</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$ignore = false</td>
				<td class="desc"><p>メソッドが存在しない場合にスルーするか。null を渡すと要素そのものを返す</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>$method が true を返した新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2003-L2070" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_maps()" tabindex="-1" class="structure-title ">
                        array_maps                        	<small>($array, ...$callbacks) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>複数コールバックを指定できる array_map</p>
<p>指定したコールバックで複数回回してマップする。<br />
<code>array_maps($array, $f, $g)</code> は <code>array_map($g, array_map($f, $array))</code> とほぼ等しい。<br />
ただし、引数は順番が違う（可変引数のため）し、コールバックが要求するならキーも渡ってくる。<br />
さらに文字列関数で "..." から始まっているなら可変引数としてコールする。</p>
<p>少し変わった仕様として、コールバックに [$method =&gt; $args] を付けるとそれはメソッド呼び出しになる。<br />
つまり各要素 $v に対して <code>$v-&gt;$method(...$args)</code> がマップ結果になる。<br />
さらに引数が不要なら <code>@method</code> とするだけで良い。</p>
<p>Example:</p>
<pre><code class="language-php">// 値を3乗したあと16進表記にして大文字化する
that(array_maps([1, 2, 3, 4, 5], rbind('pow', 3), 'dechex', 'strtoupper'))-&gt;isSame(['1', '8', '1B', '40', '7D']);
// キーも渡ってくる
that(array_maps(['a' =&gt; 'A', 'b' =&gt; 'B'], fn($v, $k) =&gt; "$k:$v"))-&gt;isSame(['a' =&gt; 'a:A', 'b' =&gt; 'b:B']);
// ... で可変引数コール
that(array_maps([[1, 3], [1, 5, 2]], '...range'))-&gt;isSame([[1, 2, 3], [1, 3, 5]]);
// メソッドコールもできる（引数不要なら `@method` でも同じ）
that(array_maps([new \Exception('a'), new \Exception('b')], ['getMessage' =&gt; []]))-&gt;isSame(['a', 'b']);
that(array_maps([new \Exception('a'), new \Exception('b')], '@getMessage'))-&gt;isSame(['a', 'b']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">...$callbacks</td>
				<td class="desc"><p>評価クロージャ配列</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>評価クロージャを通した新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2072-L2168" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_kvmap()" tabindex="-1" class="structure-title ">
                        array_kvmap                        	<small>($array, $callback) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の各キー・値にコールバックを適用する</p>
<p>$callback は (キー, 値, $callback) が渡ってくるので 「その位置に配置したい配列」を返せばそこに置換される。<br />
つまり、空配列を返せばそのキー・値は消えることになるし、複数の配列を返せば要素が増えることになる。<br />
ただし、数値キーは新しく採番される。<br />
null を返すと特別扱いで、そのキー・値をそのまま維持する。<br />
iterable を返す必要があるが、もし iterable でない場合は配列キャストされる。</p>
<p>「map も filter も可能でキー変更可能」というとてもマッチョな関数。<br />
実質的には「数値キーが再採番される再帰的でない array_convert」のように振る舞う。<br />
ただし、再帰処理はないので自前で管理する必要がある。</p>
<p>Example:</p>
<pre><code class="language-php">$array = [
   'a' =&gt; 'A',
   'b' =&gt; 'B',
   'c' =&gt; 'C',
   'd' =&gt; 'D',
];
// キーに '_' 、値に 'prefix-' を付与。'b' は一切何もしない。'c' は値のみ。'd' はそれ自体伏せる
that(array_kvmap($array, function ($k, $v) {
    if ($k === 'b') return null;
    if ($k === 'd') return [];
    if ($k !== 'c') $k = "_$k";
    return [$k =&gt; "prefix-$v"];
}))-&gt;isSame([
    '_a' =&gt; 'prefix-A',
    'b'  =&gt; 'B',
    'c'  =&gt; 'prefix-C',
]);

// 複数返せばその分増える（要素の水増し）
that(array_kvmap($array, fn($k, $v) =&gt; [
    "{$k}1" =&gt; "{$v}1",
    "{$k}2" =&gt; "{$v}2",
]))-&gt;isSame([
   'a1' =&gt; 'A1',
   'a2' =&gt; 'A2',
   'b1' =&gt; 'B1',
   'b2' =&gt; 'B2',
   'c1' =&gt; 'C1',
   'c2' =&gt; 'C2',
   'd1' =&gt; 'D1',
   'd2' =&gt; 'D2',
]);

// $callback には $callback 自体も渡ってくるので再帰も比較的楽に書ける
that(array_kvmap([
    'x' =&gt; [
        'X',
        'y' =&gt; [
            'Y',
            'z' =&gt; ['Z'],
        ],
    ],
], function ($k, $v, $callback) {
    // 配列だったら再帰する
    return ["_$k" =&gt; is_array($v) ? array_kvmap($v, $callback) : "prefix-$v"];
}))-&gt;isSame([
    "_x" =&gt; [
        "_0" =&gt; "prefix-X",
        "_y" =&gt; [
            "_0" =&gt; "prefix-Y",
            "_z" =&gt; [
                "_0" =&gt; "prefix-Z",
            ],
        ],
    ],
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>適用するコールバック</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>変換された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2170-L2209" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_kmap()" tabindex="-1" class="structure-title ">
                        array_kmap                        	<small>($array, $callback) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>キーも渡ってくる array_map</p>
<p><code>array_map($callback, $array, array_keys($array))</code> とほとんど変わりはない。<br />
違いは下記。</p>
<ul>
<li>引数の順番が異なる（$array が先）</li>
<li>キーが死なない（array_map は複数配列を与えるとキーが死ぬ）</li>
<li>配列だけでなく Traversable も受け入れる</li>
<li>callback の第3引数に 0 からの連番が渡ってくる</li>
</ul>
<p>Example:</p>
<pre><code class="language-php">// キー・値をくっつけるシンプルな例
that(array_kmap([
    'k1' =&gt; 'v1',
    'k2' =&gt; 'v2',
    'k3' =&gt; 'v3',
], fn($v, $k) =&gt; "$k:$v"))-&gt;isSame([
    'k1' =&gt; 'k1:v1',
    'k2' =&gt; 'k2:v2',
    'k3' =&gt; 'k3:v3',
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>評価クロージャ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>$callback を通した新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2211-L2281" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_nmap()" tabindex="-1" class="structure-title ">
                        array_nmap                        	<small>($array, $callback, $n, ...$variadic) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>要素値を $callback の n 番目(0ベース)に適用して array_map する</p>
<p>引数 $n に配列を与えると [キー番目 =&gt; 値番目] とみなしてキー・値も渡される（Example 参照）。<br />
その際、「挿入後の番目」ではなく、単純に「元の引数の番目」であることに留意。キー・値が同じ位置を指定している場合はキーが先にくる。</p>
<p>Example:</p>
<pre><code class="language-php">// 1番目に値を渡して map
$sprintf = fn() =&gt; vsprintf('%s%s%s', func_get_args());
that(array_nmap(['a', 'b'], $sprintf, 1, 'prefix-', '-suffix'))-&gt;isSame(['prefix-a-suffix', 'prefix-b-suffix']);
// 1番目にキー、2番目に値を渡して map
$sprintf = fn() =&gt; vsprintf('%s %s %s %s %s', func_get_args());
that(array_nmap(['k' =&gt; 'v'], $sprintf, [1 =&gt; 2], 'a', 'b', 'c'))-&gt;isSame(['k' =&gt; 'a k b v c']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>評価クロージャ</p>
</td>
			</tr>
        			<tr>
				<td class="type">int<span class="type-separator"></span><wbr>array</td>
				<td class="rest">$n</td>
				<td class="desc"><p>要素値を入れる引数番目。配列を渡すとキー・値の両方を指定でき、両方が渡ってくる</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">...$variadic</td>
				<td class="desc"><p>$callback に渡され、改変される引数（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>評価クロージャを通した新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2283-L2300" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_lmap()" tabindex="-1" class="structure-title ">
                        array_lmap                        	<small>($array, $callback, ...$variadic) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>要素値を $callback の最左に適用して array_map する</p>
<p>Example:</p>
<pre><code class="language-php">$sprintf = fn() =&gt; vsprintf('%s%s', func_get_args());
that(array_lmap(['a', 'b'], $sprintf, '-suffix'))-&gt;isSame(['a-suffix', 'b-suffix']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>評価クロージャ</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">...$variadic</td>
				<td class="desc"><p>$callback に渡され、改変される引数（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>評価クロージャを通した新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2302-L2319" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_rmap()" tabindex="-1" class="structure-title ">
                        array_rmap                        	<small>($array, $callback, ...$variadic) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>要素値を $callback の最右に適用して array_map する</p>
<p>Example:</p>
<pre><code class="language-php">$sprintf = fn() =&gt; vsprintf('%s%s', func_get_args());
that(array_rmap(['a', 'b'], $sprintf, 'prefix-'))-&gt;isSame(['prefix-a', 'prefix-b']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>評価クロージャ</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">...$variadic</td>
				<td class="desc"><p>$callback に渡され、改変される引数（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>評価クロージャを通した新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2321-L2398" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_each()" tabindex="-1" class="structure-title ">
                        array_each                        	<small>($array, $callback, $default = null) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>array_reduce の参照版（のようなもの）</p>
<p>配列をループで回し、その途中経過、値、キー、連番をコールバック引数で渡して最終的な結果を返り値として返す。<br />
array_reduce と少し似てるが、下記の点が異なる。</p>
<ul>
<li>いわゆる $carry は返り値で表すのではなく、参照引数で表す</li>
<li>値だけでなくキー、連番も渡ってくる</li>
<li>巨大配列の場合でも速度劣化が少ない（array_reduce に巨大配列を渡すと実用にならないレベルで遅くなる）</li>
</ul>
<p>$callback の引数は <code>($value, $key, $n)</code> （$n はキーとは関係がない 0 ～ 要素数-1 の通し連番）。</p>
<p>返り値ではなく参照引数なので return する必要はない（ワンライナーが書きやすくなる）。<br />
返り値が空くのでループ制御に用いる。<br />
今のところ $callback が false を返すとそこで break するのみ。</p>
<p>第3引数を省略した場合、<strong>クロージャの第1引数のデフォルト値が使われる</strong>。<br />
これは特筆すべき動作で、不格好な第3引数を完全に省略することができる（サンプルコードを参照）。<br />
ただし「php の文法違反（今のところエラーにはならないし、全てにデフォルト値をつければ一応回避可能）」「リフレクションを使う（ほんの少し遅くなる）」などの弊害が有るので推奨はしない。<br />
（ただ、「意図していることをコードで表す」といった観点ではこの記法の方が正しいとも思う）。</p>
<p>Example:</p>
<pre><code class="language-php">// 全要素を文字列的に足し合わせる
that(array_each([1, 2, 3, 4, 5], function (&amp;$carry, $v) {$carry .= $v;}, ''))-&gt;isSame('12345');
// 値をキーにして要素を2乗値にする
that(array_each([1, 2, 3, 4, 5], function (&amp;$carry, $v) {$carry[$v] = $v * $v;}, []))-&gt;isSame([
    1 =&gt; 1,
    2 =&gt; 4,
    3 =&gt; 9,
    4 =&gt; 16,
    5 =&gt; 25,
]);
// 上記と同じ。ただし、3 で break する
that(array_each([1, 2, 3, 4, 5], function (&amp;$carry, $v, $k){
    if ($k === 3) return false;
    $carry[$v] = $v * $v;
}, []))-&gt;isSame([
    1 =&gt; 1,
    2 =&gt; 4,
    3 =&gt; 9,
]);

// 下記は完全に同じ（第3引数の代わりにデフォルト引数を使っている）
that(array_each([1, 2, 3], function (&amp;$carry = [], $v = null) {
        $carry[$v] = $v * $v;
    }))-&gt;isSame(array_each([1, 2, 3], function (&amp;$carry, $v) {
        $carry[$v] = $v * $v;
    }, [])
    // 個人的に↑のようなぶら下がり引数があまり好きではない（クロージャを最後の引数にしたい）
);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>評価クロージャ。(&amp;$carry, $key, $value) を受ける</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$default = null</td>
				<td class="desc"><p>ループの最初や空の場合に適用される値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>each した結果</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2400-L2443" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_depth()" tabindex="-1" class="structure-title ">
                        array_depth                        	<small>($array, $max_depth = null) : int</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の次元数を返す</p>
<p>フラット配列は 1 と定義する。<br />
つまり、配列を与える限りは 0 以下を返すことはない。</p>
<p>第2引数 $max_depth を与えるとその階層になった時点で走査を打ち切る。<br />
「1階層のみか？」などを調べるときは指定したほうが高速に動作する。</p>
<p>Example:</p>
<pre><code class="language-php">that(array_depth([]))-&gt;isSame(1);
that(array_depth(['hoge']))-&gt;isSame(1);
that(array_depth([['nest1' =&gt; ['nest2']]]))-&gt;isSame(3);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>調べる配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">int<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$max_depth = null</td>
				<td class="desc"><p>最大階層数</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">int</td>
			<td class="desc"><p>次元数。素のフラット配列は 1</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2445-L2475" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_insert()" tabindex="-1" class="structure-title ">
                        array_insert                        	<small>($array, $value, $position = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列・連想配列を問わず任意の位置に値を挿入する</p>
<p>$position を省略すると最後に挿入される（≒ array_push）。<br />
$position に負数を与えると後ろから数えられる。<br />
$value には配列も与えられるが、その場合数値キーは振り直される</p>
<p>Example:</p>
<pre><code class="language-php">that(array_insert([1, 2, 3], 'x'))-&gt;isSame([1, 2, 3, 'x']);
that(array_insert([1, 2, 3], 'x', 1))-&gt;isSame([1, 'x', 2, 3]);
that(array_insert([1, 2, 3], 'x', -1))-&gt;isSame([1, 2, 'x', 3]);
that(array_insert([1, 2, 3], ['a' =&gt; 'A', 'b' =&gt; 'B'], 1))-&gt;isSame([1, 'a' =&gt; 'A', 'b' =&gt; 'B', 2, 3]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$value</td>
				<td class="desc"><p>挿入値</p>
</td>
			</tr>
        			<tr>
				<td class="type">int<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$position = null</td>
				<td class="desc"><p>挿入位置</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>挿入された新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2477-L2523" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_assort()" tabindex="-1" class="structure-title ">
                        array_assort                        	<small>($array, $rules) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列をコールバックに従って分類する</p>
<p>コールバックは配列で複数与える。そのキーが結果配列のキーになるが、一切マッチしなくてもキー自体は作られる。<br />
複数のコールバックにマッチしたらその分代入されるし、どれにもマッチしなければ代入されない。<br />
つまり5個の配列を分類したからと言って、全要素数が5個になるとは限らない（多い場合も少ない場合もある）。</p>
<p>$rule が要求するならキーも渡ってくる。</p>
<p>Example:</p>
<pre><code class="language-php">// lt2(2より小さい)で分類
$lt2 = fn($v) =&gt; $v &lt; 2;
that(array_assort([1, 2, 3], [
    'lt2' =&gt; $lt2,
]))-&gt;isSame([
    'lt2' =&gt; [1],
]);
// lt3(3より小さい)、ctd(ctype_digit)で分類（両方に属する要素が存在する）
$lt3 = fn($v) =&gt; $v &lt; 3;
that(array_assort(['1', '2', '3'], [
    'lt3' =&gt; $lt3,
    'ctd' =&gt; 'ctype_digit',
]))-&gt;isSame([
    'lt3' =&gt; ['1', '2'],
    'ctd' =&gt; ['1', '2', '3'],
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable[]</td>
				<td class="rest">$rules</td>
				<td class="desc"><p>分類ルール。[key =&gt; callable] 形式</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>分類された新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2525-L2606" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_count()" tabindex="-1" class="structure-title ">
                        array_count                        	<small>($array, $callback, $recursive = false) : int<span class="type-separator"></span><wbr>array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列をコールバックに従ってカウントする</p>
<p>コールバックが true 相当を返した要素をカウントして返す。<br />
普通に使う分には <code>count(array_filter($array, $callback))</code> とほとんど同じだが、下記の点が微妙に異なる。</p>
<ul>
<li>$callback が要求するならキーも渡ってくる</li>
<li>$callback には配列が渡せる。配列を渡した場合は件数を配列で返す（Example 参照）</li>
</ul>
<p>$recursive に true を渡すと再帰的に動作する。<br />
末端・配列を問わずに呼び出されるので場合によっては is_array などの判定が必要になる。</p>
<p>Example:</p>
<pre><code class="language-php">$array = ['hoge', 'fuga', 'piyo'];
// 'o' を含むものの数（2個）
that(array_count($array, fn($s) =&gt; strpos($s, 'o') !== false))-&gt;isSame(2);
// 'a' と 'o' を含むものをそれぞれ（1個と2個）
that(array_count($array, [
    'a' =&gt; fn($s) =&gt; strpos($s, 'a') !== false,
    'o' =&gt; fn($s) =&gt; strpos($s, 'o') !== false,
]))-&gt;isSame([
    'a' =&gt; 1,
    'o' =&gt; 2,
]);

// 再帰版
$array = [
    ['1', '2', '3'],
    ['a', 'b', 'c'],
    ['X', 'Y', 'Z'],
    [[[['a', 'M', 'Z']]]],
];
that((array_count)($array, [
    'lower' =&gt; fn($v) =&gt; !is_array($v) &amp;&amp; ctype_lower($v),
    'upper' =&gt; fn($v) =&gt; !is_array($v) &amp;&amp; ctype_upper($v),
    'array' =&gt; fn($v) =&gt; is_array($v),
], true))-&gt;is([
    'lower' =&gt; 4, // 小文字の数
    'upper' =&gt; 5, // 大文字の数
    'array' =&gt; 7, // 配列の数
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>カウントルール。配列も渡せる</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$recursive = false</td>
				<td class="desc"><p>再帰フラグ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">int<span class="type-separator"></span><wbr>array</td>
			<td class="desc"><p>条件一致した件数</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2608-L2672" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_group()" tabindex="-1" class="structure-title ">
                        array_group                        	<small>($array, $callback = null, $preserve_keys = false) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列をコールバックの返り値でグループ化する</p>
<p>コールバックを省略すると値そのもので評価する。<br />
コールバックに配列・文字列を与えるとキーでグループ化する。<br />
コールバックが配列を返すと入れ子としてグループ化する。</p>
<p>Example:</p>
<pre><code class="language-php">that(array_group([1, 1, 1]))-&gt;isSame([
    1 =&gt; [1, 1, 1],
]);
that(array_group([1, 2, 3], fn($v) =&gt; $v % 2))-&gt;isSame([
    1 =&gt; [1, 3],
    0 =&gt; [2],
]);
// group -&gt; id で入れ子グループにする
$row1 = ['id' =&gt; 1, 'group' =&gt; 'hoge'];
$row2 = ['id' =&gt; 2, 'group' =&gt; 'fuga'];
$row3 = ['id' =&gt; 3, 'group' =&gt; 'hoge'];
that(array_group([$row1, $row2, $row3], fn($row) =&gt; [$row['group'], $row['id']]))-&gt;isSame([
    'hoge' =&gt; [
        1 =&gt; $row1,
        3 =&gt; $row3,
    ],
    'fuga' =&gt; [
        2 =&gt; $row2,
    ],
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">?callable<span class="type-separator"></span><wbr>string<span class="type-separator"></span><wbr>array</td>
				<td class="rest">$callback = null</td>
				<td class="desc"><p>評価クロージャ。 null なら値そのもので評価</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$preserve_keys = false</td>
				<td class="desc"><p>キーを保存するか。 false の場合数値キーは振り直される</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>グルーピングされた配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2674-L2805" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_aggregate()" tabindex="-1" class="structure-title ">
                        array_aggregate                        	<small>($array, $columns, $key = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列をコールバックの返り値で集計する</p>
<p>$columns で集計列を指定する。<br />
単一の callable を渡すと結果も単一になる。<br />
複数の callable 連想配列を渡すと [キー =&gt; 集系列] の連想配列になる。<br />
いずれにせよ引数としてそのグループの配列が渡ってくるので返り値がその列の値になる。<br />
第2引数には「今までの結果が詰まった配列」が渡ってくる（count, avg, sum など何度もでてくる集計で便利）。</p>
<p>$key で集約列を指定する。<br />
指定しなければ引数の配列そのままで集計される。<br />
複数要素の配列を与えるとその数分潜って集計される。<br />
クロージャを与えると返り値がキーになる。</p>
<p>Example:</p>
<pre><code class="language-php">// 単純な配列の集計
that(array_aggregate([1, 2, 3], [
    'min' =&gt; fn($elems) =&gt; min($elems),
    'max' =&gt; fn($elems) =&gt; max($elems),
    'avg' =&gt; fn($elems) =&gt; array_sum($elems) / count($elems),
]))-&gt;isSame([
    'min' =&gt; 1, // 最小値
    'max' =&gt; 3, // 最大値
    'avg' =&gt; 2, // 平均値
]);

$row1 = ['user_id' =&gt; 'hoge', 'group' =&gt; 'A', 'score' =&gt; 4];
$row2 = ['user_id' =&gt; 'fuga', 'group' =&gt; 'B', 'score' =&gt; 6];
$row3 = ['user_id' =&gt; 'fuga', 'group' =&gt; 'A', 'score' =&gt; 5];
$row4 = ['user_id' =&gt; 'hoge', 'group' =&gt; 'A', 'score' =&gt; 8];

// user_id, group ごとの score を集計して階層配列で返す（第2引数 $current を利用している）
that(array_aggregate([$row1, $row2, $row3, $row4], [
    'scores' =&gt; fn($rows) =&gt; array_column($rows, 'score'),
    'score'  =&gt; fn($rows, $current) =&gt; array_sum($current['scores']),
], ['user_id', 'group']))-&gt;isSame([
    'hoge' =&gt; [
        'A' =&gt; [
            'scores' =&gt; [4, 8],
            'score'  =&gt; 12,
        ],
    ],
    'fuga' =&gt; [
        'B' =&gt; [
            'scores' =&gt; [6],
            'score'  =&gt; 6,
        ],
        'A' =&gt; [
            'scores' =&gt; [5],
            'score'  =&gt; 5,
        ],
    ],
]);

// user_id ごとの score を集計して単一列で返す（キーのクロージャも利用している）
that(array_aggregate([$row1, $row2, $row3, $row4],
    fn($rows) =&gt; array_sum(array_column($rows, 'score')),
    fn($row) =&gt; strtoupper($row['user_id'])))-&gt;isSame([
    'HOGE' =&gt; 12,
    'FUGA' =&gt; 11,
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable<span class="type-separator"></span><wbr>callable[]</td>
				<td class="rest">$columns</td>
				<td class="desc"><p>集計関数</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>array<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$key = null</td>
				<td class="desc"><p>集約列。クロージャを与えると返り値がキーになる</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>集約配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2807-L2839" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_all()" tabindex="-1" class="structure-title ">
                        array_all                        	<small>($array, $callback = null, $default = true) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>全要素が true になるなら true を返す（1つでも false なら false を返す）</p>
<p>$callback が要求するならキーも渡ってくる。</p>
<p>Example:</p>
<pre><code class="language-php">that(array_all([true, true]))-&gt;isTrue();
that(array_all([true, false]))-&gt;isFalse();
that(array_all([false, false]))-&gt;isFalse();
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">?callable</td>
				<td class="rest">$callback = null</td>
				<td class="desc"><p>評価クロージャ。 null なら値そのもので評価</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool<span class="type-separator"></span><wbr>mixed</td>
				<td class="rest">$default = true</td>
				<td class="desc"><p>空配列の場合のデフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>全要素が true なら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2841-L2873" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_any()" tabindex="-1" class="structure-title ">
                        array_any                        	<small>($array, $callback = null, $default = false) : bool</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>全要素が false になるなら false を返す（1つでも true なら true を返す）</p>
<p>$callback が要求するならキーも渡ってくる。</p>
<p>Example:</p>
<pre><code class="language-php">that(array_any([true, true]))-&gt;isTrue();
that(array_any([true, false]))-&gt;isTrue();
that(array_any([false, false]))-&gt;isFalse();
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">?callable</td>
				<td class="rest">$callback = null</td>
				<td class="desc"><p>評価クロージャ。 null なら値そのもので評価</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool<span class="type-separator"></span><wbr>mixed</td>
				<td class="rest">$default = false</td>
				<td class="desc"><p>空配列の場合のデフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>全要素が false なら false</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2875-L2962" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_distinct()" tabindex="-1" class="structure-title ">
                        array_distinct                        	<small>($array, $comparator = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>比較関数が渡せる array_unique</p>
<p>array_unique は微妙に癖があるのでシンプルに使いやすくしたもの。</p>
<ul>
<li>SORT_STRING|SORT_FLAG_CASE のような指定が使える（大文字小文字を無視した重複除去）<ul>
<li>厳密に言えば array_unique も指定すれば動く（が、ドキュメントに記載がない）</li>
</ul>
</li>
<li>配列を渡すと下記の動作になる<ul>
<li>数値キーは配列アクセス</li>
<li>文字キーはメソッドコール（値は引数）</li>
</ul>
</li>
<li>もちろん（$a, $b を受け取る）クロージャも渡せる</li>
</ul>
<p>Example:</p>
<pre><code class="language-php">// シンプルな重複除去
that(array_distinct([1, 2, 3, '3']))-&gt;isSame([1, 2, 3]);
// 大文字小文字を無視した重複除去
that(array_distinct(['a', 'b', 'A', 'B'], SORT_STRING|SORT_FLAG_CASE))-&gt;isSame(['a', 'b']);

$v1 = new \ArrayObject(['id' =&gt; '1', 'group' =&gt; 'aaa']);
$v2 = new \ArrayObject(['id' =&gt; '2', 'group' =&gt; 'bbb', 'dummy' =&gt; 123]);
$v3 = new \ArrayObject(['id' =&gt; '3', 'group' =&gt; 'aaa', 'dummy' =&gt; 456]);
$v4 = new \ArrayObject(['id' =&gt; '4', 'group' =&gt; 'bbb', 'dummy' =&gt; 789]);
// クロージャを指定して重複除去
that(array_distinct([$v1, $v2, $v3, $v4], fn($a, $b) =&gt; $a['group'] &lt;=&gt; $b['group']))-&gt;isSame([$v1, $v2]);
// 単純な配列アクセスなら文字列や配列でよい（上記と同じ結果になる）
that(array_distinct([$v1, $v2, $v3, $v4], 'group'))-&gt;isSame([$v1, $v2]);
// 文字キーの配列はメソッドコールになる（ArrayObject::count で重複検出）
that(array_distinct([$v1, $v2, $v3, $v4], ['count' =&gt; []]))-&gt;isSame([$v1, $v2]);
// 上記2つは混在できる（group キー + count メソッドで重複検出。端的に言えば "aaa+2", "bbb+3", "aaa+3", "bbb+3" で除去）
that(array_distinct([$v1, $v2, $v3, $v4], ['group', 'count' =&gt; []]))-&gt;isSame([$v1, $v2, 2 =&gt; $v3]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable<span class="type-separator"></span><wbr>int<span class="type-separator"></span><wbr>string<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$comparator = null</td>
				<td class="desc"><p>比較関数</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>重複が除去された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L2964-L3095" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_order()" tabindex="-1" class="structure-title ">
                        array_order                        	<small>($array, $orders, $preserve_keys = false) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列を $orders に従って並べ替える</p>
<p>データベースからフェッチしたような連想配列の配列を想定しているが、スカラー配列(['key' =&gt; 'value'])にも対応している。<br />
その場合 $orders に配列ではなく直値を渡せば良い。</p>
<p>$orders には下記のような配列を渡す。<br />
キーに空文字を渡すとそれは「キー自体」を意味する。</p>
<pre><code class="language-php">$orders = [
    'col1' =&gt; true,                      // true: 昇順, false: 降順。照合は型に依存
    'col2' =&gt; SORT_NATURAL,              // SORT_NATURAL, SORT_REGULAR などで照合。正数で昇順、負数で降順
    'col3' =&gt; ['sort', 'this', 'order'], // 指定した配列順で昇順
    'col4' =&gt; fn($v) =&gt; $v,              // クロージャを通した値で昇順。照合は返り値の型に依存
    'col5' =&gt; fn($a, $b) =&gt; $a - $b,     // クロージャで比較して昇順（いわゆる比較関数を渡す）
];
</code></pre>
<p>Example:</p>
<pre><code class="language-php">$v1 = ['id' =&gt; '1', 'no' =&gt; 'a03', 'name' =&gt; 'yyy'];
$v2 = ['id' =&gt; '2', 'no' =&gt; 'a4',  'name' =&gt; 'yyy'];
$v3 = ['id' =&gt; '3', 'no' =&gt; 'a12', 'name' =&gt; 'xxx'];
// name 昇順, no 自然降順
that(array_order([$v1, $v2, $v3], ['name' =&gt; true, 'no' =&gt; -SORT_NATURAL]))-&gt;isSame([$v3, $v2, $v1]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$orders</td>
				<td class="desc"><p>ソート順</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$preserve_keys = false</td>
				<td class="desc"><p>キーを保存するか。 false の場合数値キーは振り直される</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>並び替えられた配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3097-L3118" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_shuffle()" tabindex="-1" class="structure-title ">
                        array_shuffle                        	<small>($array) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>shuffle のキーが保存される＋参照渡しではない版</p>
<p>Example:</p>
<pre><code class="language-php">that(array_shuffle(['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C']))-&gt;is(['b' =&gt; 'B', 'a' =&gt; 'A', 'c' =&gt; 'C']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>shuffle された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3120-L3169" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_random()" tabindex="-1" class="structure-title ">
                        array_random                        	<small>($array, $count = null, $preserve_keys = false) : mixed</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>array_rand の要素版</p>
<p>とはいえ多少の差異がある。</p>
<ul>
<li>第2引数に null を与えると単一の値として返す</li>
<li>第2引数に数値を与えると配列で返す（たとえ1でも配列で返す）</li>
<li>第2引数に 0 を与えてもエラーにはならない（空配列を返す）</li>
<li>第3引数に true を与えるとキーを維持して返す</li>
</ul>
<p>Example:</p>
<pre><code class="language-php">mt_srand(4); // テストがコケるので種固定
// 配列からランダムに値1件取得（単一で返す）
that(array_random(['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C']))-&gt;isSame('B');
// 配列からランダムに値2件取得（配列で返す）
that(array_random(['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'], 2))-&gt;isSame(['B', 'C']);
// 配列からランダムに値2件取得（キーを維持）
that(array_random(['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'], 2, true))-&gt;isSame(['a' =&gt; 'A', 'c' =&gt; 'C']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">?int</td>
				<td class="rest">$count = null</td>
				<td class="desc"><p>取り出す個数</p>
</td>
			</tr>
        			<tr>
				<td class="type"></td>
				<td class="rest">$preserve_keys = false</td>
				<td class="desc"></td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">mixed</td>
			<td class="desc"><p>ランダムな要素</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3171-L3199" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_shrink_key()" tabindex="-1" class="structure-title ">
                        array_shrink_key                        	<small>(...$variadic) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>値の優先順位を逆にした array_intersect_key</p>
<p>array_intersect_key は「左優先で共通項を取る」という動作だが、この関数は「右優先で共通項を取る」という動作になる。<br />
「配列の並び順はそのままで値だけ変えたい/削ぎ落としたい」という状況はまれによくあるはず。</p>
<p>Example:</p>
<pre><code class="language-php">$array1 = ['a' =&gt; 'A1', 'b' =&gt; 'B1', 'c' =&gt; 'C1'];
$array2 = ['c' =&gt; 'C2', 'b' =&gt; 'B2', 'a' =&gt; 'A2'];
$array3 = ['c' =&gt; 'C3', 'dummy' =&gt; 'DUMMY'];
// 全共通項である 'c' キーのみが生き残り、その値は最後の 'C3' になる
that(array_shrink_key($array1, $array2, $array3))-&gt;isSame(['c' =&gt; 'C3']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable<span class="type-separator"></span><wbr>array</td>
				<td class="rest">...$variadic</td>
				<td class="desc"><p>共通項を取る配列（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3201-L3324" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_extend()" tabindex="-1" class="structure-title ">
                        array_extend                        	<small>($default = [], ...$arrays) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>独自拡張した array_replace_recursive</p>
<p>下記の点で array_replace_recursive と異なる。</p>
<ul>
<li>元配列のキーのみでフィルタされる</li>
<li>対象配列にクロージャを渡すと現在の状態を引数にしてコールバックされる</li>
<li>値に Generator や Generator 関数を渡すと最後にまとめて値化される<ul>
<li>つまり、上書きされた値は実質的にコールされない</li>
</ul>
</li>
<li>recursive かどうかは 最初の引数で分岐する（jQuery の extend と同じ）</li>
<li>recursive の場合、元配列の値が配列の場合のみ対象となる。配列でない場合は単純に上書きされる<ul>
<li>次の値が非配列の場合、末尾に追加される</li>
<li>次の値がクロージャの場合、元の値を引数にしてコールバックされる</li>
<li>次の値が配列の場合<ul>
<li>元配列が数値配列なら完全にマージされる</li>
<li>元配列が連想配列なら再帰される</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>この仕様上、Generator を値とする配列を対象にすることはできないが、そのような状況は稀だろう。<br />
その代わり、使われるかどうか分からない状態でもとりあえず Generator にしておけば無駄な処理を省くことができる。</p>
<p>Example:</p>
<pre><code class="language-php"># $deep ではない単純呼び出し
that(array_extend([
    'overwrite' =&gt; 'hoge',            // 後段で指定されているので上書きされる
    'through'   =&gt; 'fuga',            // 後段で指定されていないので生き残る
    'array'     =&gt; ['a', 'b', 'c'],   // $deep ではないし後段で指定されているので完全に上書きされる
    'yield1'    =&gt; fn() =&gt; yield 123, // 後段で指定されているのでコールすらされない
    'yield2'    =&gt; fn() =&gt; yield 456, // 後段で指定されていないのでコールされる
], [
    'ignore'    =&gt; null,              // 元配列に存在しないのでスルーされる
    'overwrite' =&gt; 'HOGE',
    'array'     =&gt; ['x', 'y', 'z'],
    'yield1'    =&gt; fn() =&gt; yield 234,
]))-&gt;is([
    'overwrite' =&gt; 'HOGE',
    'through'   =&gt; 'fuga',
    'array'     =&gt; ['x', 'y', 'z'],
    'yield1'    =&gt; 234,
    'yield2'    =&gt; 456,
]);
# $deep の場合のマージ呼び出し
that(array_extend(true, [
    'array'    =&gt; ['hoge'],            // 後段がスカラーなので末尾に追加される
    'callback' =&gt; ['fuga'],            // 後段がクロージャなのでコールバックされる
    'list'     =&gt; ['a', 'b', 'c'],     // 数値配列なのでマージされる
    'hash'     =&gt; ['a' =&gt; null],       // 連想配列なので再帰される
    'yield'    =&gt; [fn() =&gt; yield 123], // generator は解決される
], [
    'array'    =&gt; 'HOGE',
    'callback' =&gt; fn($v) =&gt; $v + [1 =&gt; 'FUGA'],
    'list'     =&gt; ['x', 'y', 'z'],
    'hash'     =&gt; ['a' =&gt; ['x' =&gt; ['y' =&gt; ['z' =&gt; 'xyz']]]],
    'yield'    =&gt; [fn() =&gt; yield 456],
]))-&gt;is([
    'array'    =&gt; ['hoge', 'HOGE'],
    'callback' =&gt; ['fuga', 'FUGA'],
    'list'     =&gt; ['a', 'b', 'c', 'x', 'y', 'z'],
    'hash'     =&gt; ['a' =&gt; ['x' =&gt; ['y' =&gt; ['z' =&gt; 'xyz']]]],
    'yield'    =&gt; [123, 456],
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr>bool</td>
				<td class="rest">$default = []</td>
				<td class="desc"><p>基準となる配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">iterable<span class="type-separator"></span><wbr><a href="http://php.net/manual/ja/class.closure.php" class="fqsen" target="_blank">\Closure</a></td>
				<td class="rest">...$arrays</td>
				<td class="desc"><p>マージする配列</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3326-L3417" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_fill_gap()" tabindex="-1" class="structure-title ">
                        array_fill_gap                        	<small>($array, ...$values) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の隙間を埋める</p>
<p>「隙間」とは数値キーの隙間のこと。文字キーには関与しない。<br />
連番の抜けている箇所に $values の値を順次詰めていく動作となる。</p>
<p>値が足りなくてもエラーにはならない。つまり、この関数を通したとしても隙間が無くなるわけではない。<br />
また、隙間を埋めても値が余る場合（隙間より与えられた値が多い場合）は末尾に全て追加される。</p>
<p>負数キーは考慮しない。</p>
<p>Example:</p>
<pre><code class="language-php">// ところどころキーが抜け落ちている配列の・・・
$array = [
    1 =&gt; 'b',
    2 =&gt; 'c',
    5 =&gt; 'f',
    7 =&gt; 'h',
];
// 抜けているところを可変引数で順次埋める（'i', 'j' は隙間というより末尾追加）
that(array_fill_gap($array, 'a', 'd', 'e', 'g', 'i', 'j'))-&gt;isSame([
    0 =&gt; 'a',
    1 =&gt; 'b',
    2 =&gt; 'c',
    3 =&gt; 'd',
    4 =&gt; 'e',
    5 =&gt; 'f',
    6 =&gt; 'g',
    7 =&gt; 'h',
    8 =&gt; 'i',
    9 =&gt; 'j',
]);

// 文字キーには関与しないし、値は足りなくても良い
$array = [
    1   =&gt; 'b',
    'x' =&gt; 'noize',
    4   =&gt; 'e',
    'y' =&gt; 'noize',
    7   =&gt; 'h',
    'z' =&gt; 'noize',
];
// 文字キーはそのまま保持され、値が足りないので 6 キーはない
that(array_fill_gap($array, 'a', 'c', 'd', 'f'))-&gt;isSame([
    0   =&gt; 'a',
    1   =&gt; 'b',
    'x' =&gt; 'noize',
    2   =&gt; 'c',
    3   =&gt; 'd',
    4   =&gt; 'e',
    'y' =&gt; 'noize',
    5   =&gt; 'f',
    7   =&gt; 'h',
    'z' =&gt; 'noize',
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">...$values</td>
				<td class="desc"><p>詰める値（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>隙間が詰められた配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3419-L3450" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_fill_callback()" tabindex="-1" class="structure-title ">
                        array_fill_callback                        	<small>($keys, $callback) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>array_fill_keys のコールバック版のようなもの</p>
<p>指定したキー配列をそれらのマップしたもので配列を生成する。<br />
<code>array_combine($keys, array_map($callback, $keys))</code> とほぼ等価。</p>
<p>Example:</p>
<pre><code class="language-php">$abc = ['a', 'b', 'c'];
// [a, b, c] から [a =&gt; A, b =&gt; B, c =&gt; C] を作る
that(array_fill_callback($abc, 'strtoupper'))-&gt;isSame([
    'a' =&gt; 'A',
    'b' =&gt; 'B',
    'c' =&gt; 'C',
]);
// [a, b, c] からその sha1 配列を作って大文字化する
that(array_fill_callback($abc, fn($v) =&gt; strtoupper(sha1($v))))-&gt;isSame([
    'a' =&gt; '86F7E437FAA5A7FCE15D1DDCB9EAEAEA377667B8',
    'b' =&gt; 'E9D71F5EE7C92D6DC9E92FFDAD17B8BD49418F98',
    'c' =&gt; '84A516841BA77A5B4648DE2CD0DFCB30EA46DBB4',
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$keys</td>
				<td class="desc"><p>キーとなる配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>要素のコールバック（引数でキーが渡ってくる）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3452-L3493" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_pickup()" tabindex="-1" class="structure-title ">
                        array_pickup                        	<small>($array, $keys) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>キーを指定してそれだけの配列にする</p>
<p><code>array_intersect_key($array, array_flip($keys))</code> とほぼ同義。<br />
違いは Traversable を渡せることと、結果配列の順番が $keys に従うこと。</p>
<p>$keys に連想配列を渡すとキーを読み替えて動作する（Example を参照）。</p>
<p>Example:</p>
<pre><code class="language-php">$array = ['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'];
// a と c を取り出す
that(array_pickup($array, ['a', 'c']))-&gt;isSame(['a' =&gt; 'A', 'c' =&gt; 'C']);
// 順番は $keys 基準になる
that(array_pickup($array, ['c', 'a']))-&gt;isSame(['c' =&gt; 'C', 'a' =&gt; 'A']);
// 連想配列を渡すと読み替えて返す
that(array_pickup($array, ['c' =&gt; 'cX', 'a' =&gt; 'aX']))-&gt;isSame(['cX' =&gt; 'C', 'aX' =&gt; 'A']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$keys</td>
				<td class="desc"><p>取り出すキー</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3495-L3520" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_remove()" tabindex="-1" class="structure-title ">
                        array_remove                        	<small>($array, $keys) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>キーを指定してそれらを除いた配列にする</p>
<p><code>array_diff_key($array, array_flip($keys))</code> とほぼ同義。<br />
違いは Traversable を渡せること。</p>
<p>array_pickup の逆とも言える。</p>
<p>Example:</p>
<pre><code class="language-php">$array = ['a' =&gt; 'A', 'b' =&gt; 'B', 'c' =&gt; 'C'];
// a と c を伏せる（b を残す）
that(array_remove($array, ['a', 'c']))-&gt;isSame(['b' =&gt; 'B']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr><a href="http://php.net/manual/ja/class.traversable.php" class="fqsen" target="_blank">\Traversable</a></td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$keys</td>
				<td class="desc"><p>伏せるキー</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3522-L3568" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_lookup()" tabindex="-1" class="structure-title ">
                        array_lookup                        	<small>($array, $column_key = null, $index_key = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>キー保存可能な array_column</p>
<p>array_column は キーを保存することが出来ないが、この関数は引数を2つだけ与えるとキーはそのままで array_column 相当の配列を返す。<br />
逆に第3引数にクロージャを与えるとその結果をキーにすることが出来る。</p>
<p>Example:</p>
<pre><code class="language-php">$array = [
    11 =&gt; ['id' =&gt; 1, 'name' =&gt; 'name1'],
    12 =&gt; ['id' =&gt; 2, 'name' =&gt; 'name2'],
    13 =&gt; ['id' =&gt; 3, 'name' =&gt; 'name3'],
];
// 第3引数を渡せば array_column と全く同じ
that(array_lookup($array, 'name', 'id'))-&gt;isSame(array_column($array, 'name', 'id'));
that(array_lookup($array, 'name', null))-&gt;isSame(array_column($array, 'name', null));
// 省略すればキーが保存される
that(array_lookup($array, 'name'))-&gt;isSame([
    11 =&gt; 'name1',
    12 =&gt; 'name2',
    13 =&gt; 'name3',
]);
// クロージャを指定すればキーが生成される
that(array_lookup($array, 'name', fn($v, $k) =&gt; $k * 2))-&gt;isSame([
    22 =&gt; 'name1',
    24 =&gt; 'name2',
    26 =&gt; 'name3',
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$column_key = null</td>
				<td class="desc"><p>値となるキー</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr><a href="http://php.net/manual/ja/class.closure.php" class="fqsen" target="_blank">\Closure</a><span class="type-separator"></span><wbr>null</td>
				<td class="rest">$index_key = null</td>
				<td class="desc"><p>キーとなるキー</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3570-L3673" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_select()" tabindex="-1" class="structure-title ">
                        array_select                        	<small>($array, $columns, $index = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>指定キーの要素で抽出する</p>
<p>$columns に単純な値を渡すとそのキーの値を選択する。<br />
キー付きで値を渡すと読み替えて選択する。<br />
キー付きでクロージャを渡すと <code>(キーの値, 行自体, 現在行のキー)</code> を引数としてコールバックして選択する。<br />
単一のクロージャを渡すと <code>(行自体, 現在行のキー)</code> を引数としてコールバックして選択する（array_map とほぼ同じ）。</p>
<p>Example:</p>
<pre><code class="language-php">$array = [
    11 =&gt; ['id' =&gt; 1, 'name' =&gt; 'name1'],
    12 =&gt; ['id' =&gt; 2, 'name' =&gt; 'name2'],
    13 =&gt; ['id' =&gt; 3, 'name' =&gt; 'name3'],
];

that(array_select($array, [
    'id',              // id を単純取得
    'alias' =&gt; 'name', // name を alias として取得
]))-&gt;isSame([
    11 =&gt; ['id' =&gt; 1, 'alias' =&gt; 'name1'],
    12 =&gt; ['id' =&gt; 2, 'alias' =&gt; 'name2'],
    13 =&gt; ['id' =&gt; 3, 'alias' =&gt; 'name3'],
]);

that(array_select($array, [
    // id の 10 倍を取得
    'id'     =&gt; fn($id) =&gt; $id * 10,
    // id と name の結合を取得
    'idname' =&gt; fn($null, $row, $index) =&gt; $row['id'] . $row['name'],
]))-&gt;isSame([
    11 =&gt; ['id' =&gt; 10, 'idname' =&gt; '1name1'],
    12 =&gt; ['id' =&gt; 20, 'idname' =&gt; '2name2'],
    13 =&gt; ['id' =&gt; 30, 'idname' =&gt; '3name3'],
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>iterable<span class="type-separator"></span><wbr><a href="http://php.net/manual/ja/class.closure.php" class="fqsen" target="_blank">\Closure</a></td>
				<td class="rest">$columns</td>
				<td class="desc"><p>抽出項目</p>
</td>
			</tr>
        			<tr>
				<td class="type">int<span class="type-separator"></span><wbr>string<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$index = null</td>
				<td class="desc"><p>キーとなるキー</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3675-L3710" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_columns()" tabindex="-1" class="structure-title ">
                        array_columns                        	<small>($array, $column_keys = null, $index_key = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>全要素に対して array_column する</p>
<p>行列が逆転するイメージ。</p>
<p>Example:</p>
<pre><code class="language-php">$row1 = ['id' =&gt; 1, 'name' =&gt; 'A'];
$row2 = ['id' =&gt; 2, 'name' =&gt; 'B'];
$rows = [$row1, $row2];
that(array_columns($rows))-&gt;isSame(['id' =&gt; [1, 2], 'name' =&gt; ['A', 'B']]);
that(array_columns($rows, 'id'))-&gt;isSame(['id' =&gt; [1, 2]]);
that(array_columns($rows, 'name', 'id'))-&gt;isSame(['name' =&gt; [1 =&gt; 'A', 2 =&gt; 'B']]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>array<span class="type-separator"></span><wbr>null</td>
				<td class="rest">$column_keys = null</td>
				<td class="desc"><p>引っ張ってくるキー名</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">$index_key = null</td>
				<td class="desc"><p>新しい配列のキーとなるキー名</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3712-L3754" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_uncolumns()" tabindex="-1" class="structure-title ">
                        array_uncolumns                        	<small>($array, $template = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>array_columns のほぼ逆で [キー =&gt; [要素]] 配列から連想配列の配列を生成する</p>
<p>$template を指定すると「それに含まれる配列かつ値がデフォルト」になる（要するに $default みたいなもの）。<br />
キーがバラバラな配列を指定する場合は指定したほうが良い。が、null を指定すると最初の要素が使われるので大抵の場合は null で良い。</p>
<p>Example:</p>
<pre><code class="language-php">that(array_uncolumns([
    'id'   =&gt; [1, 2],
    'name' =&gt; ['A', 'B'],
]))-&gt;isSame([
    ['id' =&gt; 1, 'name' =&gt; 'A'],
    ['id' =&gt; 2, 'name' =&gt; 'B'],
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">?array</td>
				<td class="rest">$template = null</td>
				<td class="desc"><p>抽出要素とそのデフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>新しい配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3756-L3879" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_convert()" tabindex="-1" class="structure-title ">
                        array_convert                        	<small>($array, $callback, $apply_array = false) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の各要素に再帰的にコールバックを適用して変換する</p>
<p>$callback は下記の仕様。</p>
<p>引数は (キー, 値, 今まで処理したキー配列) で渡ってくる。<br />
返り値は新しいキーを返す。</p>
<ul>
<li>文字列や数値を返すとそれがキーとして使われる</li>
<li>null を返すと元のキーがそのまま使われる</li>
<li>true を返すと数値連番が振られる</li>
<li>false を返すとその要素は無かったことになる</li>
<li>配列を返すとその配列で完全に置換される</li>
</ul>
<p>$apply_array=false で要素が配列の場合は再帰され、コールバックが適用されない（array_walk_recursive と同じ仕様）。</p>
<p>$apply_array=true だと配列かは問わず全ての要素にコールバックが適用される。<br />
配列も渡ってきてしまうのでコールバック内部で is_array 判定が必要になる場合がある。</p>
<p>「map も filter も可能でキー変更可能かつ再帰的」というとてもマッチョな関数。<br />
複雑だが実質的には「キーも設定できる array_walk_recursive」のように振る舞う（そしてそのような使い方を想定している）。</p>
<p>Example:</p>
<pre><code class="language-php">$array = [
   'k1' =&gt; 'v1',
   'k2' =&gt; [
       'k21' =&gt; 'v21',
       'k22' =&gt; [
           'k221' =&gt; 'v221',
           'k222' =&gt; 'v222',
       ],
       'k23' =&gt; 'v23',
   ],
];
// 全要素に 'prefix-' を付与する。キーには '_' をつける。ただし 'k21' はそのままとする。さらに 'k22' はまるごと伏せる。 'k23' は数値キーになる
$callback = function ($k, &amp;$v) {
    if ($k === 'k21') return null;
    if ($k === 'k22') return false;
    if ($k === 'k23') return true;
    if (!is_array($v)) $v = "prefix-$v";
    return "_$k";
};
that(array_convert($array, $callback, true))-&gt;isSame([
    '_k1' =&gt; 'prefix-v1',
    '_k2' =&gt; [
        'k21' =&gt; 'v21',
        0     =&gt; 'v23',
    ],
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">callable</td>
				<td class="rest">$callback</td>
				<td class="desc"><p>適用するコールバック</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$apply_array = false</td>
				<td class="desc"><p>配列要素にもコールバックを適用するか</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>変換された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3881-L3953" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_flatten()" tabindex="-1" class="structure-title ">
                        array_flatten                        	<small>($array, $delimiter = null) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>多階層配列をフラットに展開する</p>
<p>巷にあふれている実装と違って、 ["$pkey.$ckey" =&gt; $value] 形式の配列でも返せる。<br />
$delimiter で区切り文字を指定した場合にそのようになる。<br />
$delimiter = null の場合に本当の配列で返す（巷の実装と同じ）。</p>
<p>Example:</p>
<pre><code class="language-php">$array = [
   'k1' =&gt; 'v1',
   'k2' =&gt; [
       'k21' =&gt; 'v21',
       'k22' =&gt; [
           'k221' =&gt; 'v221',
           'k222' =&gt; 'v222',
           'k223' =&gt; [1, 2, 3],
       ],
   ],
];
// 区切り文字指定なし
that(array_flatten($array))-&gt;isSame([
   0 =&gt; 'v1',
   1 =&gt; 'v21',
   2 =&gt; 'v221',
   3 =&gt; 'v222',
   4 =&gt; 1,
   5 =&gt; 2,
   6 =&gt; 3,
]);
// 区切り文字指定
that(array_flatten($array, '.'))-&gt;isSame([
   'k1'            =&gt; 'v1',
   'k2.k21'        =&gt; 'v21',
   'k2.k22.k221'   =&gt; 'v221',
   'k2.k22.k222'   =&gt; 'v222',
   'k2.k22.k223.0' =&gt; 1,
   'k2.k22.k223.1' =&gt; 2,
   'k2.k22.k223.2' =&gt; 3,
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr><a href="http://php.net/manual/ja/class.closure.php" class="fqsen" target="_blank">\Closure</a><span class="type-separator"></span><wbr>null</td>
				<td class="rest">$delimiter = null</td>
				<td class="desc"><p>キーの区切り文字。 null を与えると連番になる</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>フラット化された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L3955-L4029" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_nest()" tabindex="-1" class="structure-title ">
                        array_nest                        	<small>($array, $delimiter = &quot;.&quot;) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>シンプルな [キー =&gt; 値] な配列から階層配列を生成する</p>
<p>定義的に array_flatten の逆関数のような扱いになる。<br />
$delimiter で階層を表現する。</p>
<p>同名とみなされるキーは上書きされるか例外が飛ぶ。具体的には Example を参照。</p>
<p>Example:</p>
<pre><code class="language-php">// 単純な階層展開
$array = [
   'k1'            =&gt; 'v1',
   'k2.k21'        =&gt; 'v21',
   'k2.k22.k221'   =&gt; 'v221',
   'k2.k22.k222'   =&gt; 'v222',
   'k2.k22.k223.0' =&gt; 1,
   'k2.k22.k223.1' =&gt; 2,
   'k2.k22.k223.2' =&gt; 3,
];
that(array_nest($array))-&gt;isSame([
   'k1' =&gt; 'v1',
   'k2' =&gt; [
       'k21' =&gt; 'v21',
       'k22' =&gt; [
           'k221' =&gt; 'v221',
           'k222' =&gt; 'v222',
           'k223' =&gt; [1, 2, 3],
       ],
   ],
]);
// 同名になるようなキーは上書きされる
$array = [
   'k1.k2' =&gt; 'v1', // この時点で 'k1' は配列になるが・・・
   'k1'    =&gt; 'v2', // この時点で 'k1' は文字列として上書きされる
];
that(array_nest($array))-&gt;isSame([
   'k1' =&gt; 'v2',
]);
// 上書きすら出来ない場合は例外が飛ぶ
$array = [
   'k1'    =&gt; 'v1', // この時点で 'k1' は文字列になるが・・・
   'k1.k2' =&gt; 'v2', // この時点で 'k1' にインデックスアクセスすることになるので例外が飛ぶ
];
try {
    array_nest($array);
}
catch (\Exception $e) {
    that($e)-&gt;isInstanceOf(\InvalidArgumentException::class);
}
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array</td>
				<td class="desc"><p>対象配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$delimiter = &quot;.&quot;</td>
				<td class="desc"><p>キーの区切り文字</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>階層化された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L4031-L4134" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_difference()" tabindex="-1" class="structure-title ">
                        array_difference                        	<small>($array1, $array2, $delimiter = &quot;.&quot;) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列の差分を取り配列で返す</p>
<p>返り値の配列は構造化されたデータではない。<br />
主に文字列化して出力することを想定している。</p>
<p>ユースケースとしては「スキーマデータ」「各環境の設定ファイル」などの差分。</p>
<ul>
<li>'+' はキーが追加されたことを表す</li>
<li>'-' はキーが削除されたことを表す</li>
<li>両方が含まれている場合、値の変更を表す</li>
</ul>
<p>数値キーはキーの比較は行われない。値の差分のみ返す。</p>
<p>Example:</p>
<pre><code class="language-php">// common は 中身に差分がある。 1 に key1 はあるが、 2 にはない。2 に key2 はあるが、 1 にはない。
that(array_difference([
    'common' =&gt; [
        'sub' =&gt; [
            'x' =&gt; 'val',
        ]
    ],
    'key1'   =&gt; 'hoge',
    'array'  =&gt; ['a', 'b', 'c'],
], [
    'common' =&gt; [
        'sub' =&gt; [
            'x' =&gt; 'VAL',
        ]
    ],
    'key2'   =&gt; 'fuga',
    'array'  =&gt; ['c', 'd', 'e'],
]))-&gt;isSame([
    'common.sub.x' =&gt; ['-' =&gt; 'val', '+' =&gt; 'VAL'],
    'key1'         =&gt; ['-' =&gt; 'hoge'],
    'array'        =&gt; ['-' =&gt; ['a', 'b'], '+' =&gt; ['d', 'e']],
    'key2'         =&gt; ['+' =&gt; 'fuga'],
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array1</td>
				<td class="desc"><p>対象配列1</p>
</td>
			</tr>
        			<tr>
				<td class="type">iterable</td>
				<td class="rest">$array2</td>
				<td class="desc"><p>対象配列2</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$delimiter = &quot;.&quot;</td>
				<td class="desc"><p>差分配列のキー区切り文字</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>差分を表す配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Arrays.php#L4136-L4360" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Arrays::array_schema()" tabindex="-1" class="structure-title ">
                        array_schema                        	<small>($schema, ...$arrays) : array</small>
						</h4>
					<div class="inner-item">
						<div class="description"><p>配列のスキーマを定義して配列を正規化する</p>
<ul>
<li>type: 値の型を指定する<ul>
<li>is_XXX の XXX 部分: 左記で検証</li>
<li>number: is_int or is_float で検証</li>
<li>class 名: instanceof で検証</li>
<li>list: 値がマージされて通常配列になる<ul>
<li>list@string のようにすると配列の中身の型を指定できる</li>
</ul>
</li>
<li>hash: 連想配列になる</li>
<li>string|int: string or int</li>
<li></li>
</ul>
</li>
<li>closure: 指定クロージャで検証・フィルタ<ul>
<li>all: 値を引数に取り、返り値が新しい値となる</li>
</ul>
</li>
<li>unique: 重複を除去する<ul>
<li>list: 重複除去（パラメータがソートアルゴリズムになる）</li>
</ul>
</li>
<li>enum: 値が指定値のいずれかであるか検証する<ul>
<li>all: in_array で検証する</li>
</ul>
</li>
<li>min: 値が指定値以上であるか検証する<ul>
<li>string: strlen で検証</li>
<li>list: count で検証</li>
<li>all: その値で検証</li>
</ul>
</li>
<li>max: 値が指定値以下であるか検証する<ul>
<li>min の逆</li>
</ul>
</li>
<li>match: 値が正規表現にマッチするか検証する<ul>
<li>all: preg_match で検証する</li>
</ul>
</li>
<li>unmatch: 値が正規表現にマッチしないか検証する<ul>
<li>match の逆</li>
</ul>
</li>
<li>include: 値が指定値を含むか検証する<ul>
<li>string: strpos で検証</li>
<li>list: in_array で検証</li>
</ul>
</li>
<li>exclude: 値が指定値を含まないか検証する<ul>
<li>include の逆</li>
</ul>
</li>
</ul>
<p>検証・フィルタは原則として型を見ない（指定されていればすべて実行される）。<br />
のでおかしな型におかしな検証・フィルタを与えると型エラーが出ることがある。</p>
<p>検証は途中経過を問わない。<br />
後ろの配列で上書きされた値や unique で減った配列などは以下に違反していても valid と判断される。</p>
<p>素直に json schema を使えという内なる声が聞こえなくもない。</p>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$schema</td>
				<td class="desc"><p>スキーマ配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">...$arrays</td>
				<td class="desc"><p>検証する配列（可変引数。マージされる）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>正規化された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            		</ul>
    
	<div class="attribute">
		<span class="label label-default"></span>
		<span class="label label-default"></span>
	</div>
	<div class="clearfix"></div>
</div>
</body>
</html>
