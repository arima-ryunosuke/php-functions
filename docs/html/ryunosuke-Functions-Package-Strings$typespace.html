<!DOCTYPE html>
<html>
<head>	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/zenburn.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js-bootstrap-css/1.2.1/typeaheadjs.min.css">
	<link rel="stylesheet" type="text/css" data-href="common.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-3-typeahead/3.1.1/bootstrap3-typeahead.min.js"></script>
	<script data-src="common.js"></script>

	<script>
        (function () {
            var cachekey;
            try {
                cachekey = window.parent.CACHEKEY;
            }
            catch (e) {
                cachekey = 'nocache';
            }
            $('link[data-href]').attr('href', function () {
                return this.dataset.href + '?' + cachekey;
            });
            $('script[data-src]').attr('src', function () {
                return this.dataset.src + '?' + cachekey;
            });

            $(document).on('click', 'a[href]:not(.cachekey)', function () {
                this.classList.add('cachekey');
                this.href = this.href.replace('.html', '.html?' + cachekey);
            });
        })();
	</script>
    </head>
<body>
<a id="anchor" href="./" style="display: none"></a>
<h1 class="ellipsis">
	<span class="pull-left">
	Structure
	<small class="ellipsis-text">(ryunosuke\Functions\Package\Strings)</small>
	</span>
</h1>
<div class="main-wrapper">
	<div class="attribute">
		<span class="label label-danger"></span>
		<span class="label label-warning"></span>
		<span class="label label-info"></span>
		<span class="label label-info"></span>
		<span class="label label-deprecated"></span>
        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L5-L826" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                    	</div>

	<h2>class <span class="category-name">ryunosuke\Functions\Package\Strings</span></h2>

	<div class="description"><p>文字列関連のユーティリティ</p>
</div>

	<h3>Construction</h3>
                
	<h3>Hierarchy</h3>
	<div class="hierarchy"></div>

	<h3>Constants</h3>
    
	<h3>Properties</h3>
    
	<h3>Methods</h3>
    		<ul>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L10-L24" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::strcat()" tabindex="-1" class="structure-title ">
                        strcat						<small>(...$variadic)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>文字列結合の関数版</p>
<p>Example:</p>
<pre><code class="language-php">assertSame(strcat('a', 'b', 'c'), 'abc');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">...$variadic</td>
				<td class="desc"><p>結合する文字列（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>結合した文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L26-L53" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::concat()" tabindex="-1" class="structure-title ">
                        concat						<small>(...$variadic)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>strcat の空文字回避版</p>
<p>基本は strcat と同じ。ただし、<strong>引数の内1つでも空文字を含むなら空文字を返す</strong>。</p>
<p>「プレフィックスやサフィックスを付けたいんだけど、空文字の場合はそのままで居て欲しい」という状況はまれによくあるはず。<br />
コードで言えば <code>strlen($string) ? 'prefix-' . $string : '';</code> のようなもの。<br />
可変引数なので 端的に言えば mysql の CONCAT みたいな動作になる（あっちは NULL だが）。</p>
<pre><code class="language-php">assertSame(concat('prefix-', 'middle', '-suffix'), 'prefix-middle-suffix');
assertSame(concat('prefix-', '', '-suffix'), '');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">mixed</td>
				<td class="rest">...$variadic</td>
				<td class="desc"><p>結合する文字列（可変引数）</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>結合した文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L55-L90" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::split_noempty()" tabindex="-1" class="structure-title ">
                        split_noempty						<small>($delimiter, $string, $trimchars = true)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>空文字を除外する文字列分割</p>
<ul>
<li>空文字を任意の区切り文字で分割しても常に空配列</li>
<li>キーは連番で返す（歯抜けがないただの配列）</li>
</ul>
<p>$triming を指定した場合、結果配列にも影響する。<br />
つまり「除外は trim したいが結果配列にはしたくない」はできない。</p>
<p>Example:</p>
<pre><code class="language-php">assertSame(split_noempty(',', 'a, b, c'), ['a', 'b', 'c']);
assertSame(split_noempty(',', 'a, , , b, c'), ['a', 'b', 'c']);
assertSame(split_noempty(',', 'a, , , b, c', false), ['a', ' ', ' ', ' b', ' c']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$delimiter</td>
				<td class="desc"><p>区切り文字</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$string</td>
				<td class="desc"><p>対象文字</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>bool</td>
				<td class="rest">$trimchars = true</td>
				<td class="desc"><p>指定した文字を trim する。true を指定すると trim する</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>指定文字で分割して空文字を除いた配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L92-L132" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::multiexplode()" tabindex="-1" class="structure-title ">
                        multiexplode						<small>($delimiter, $string, $limit = PHP_INT_MAX)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>explode の配列対応と $limit の挙動を変えたもの</p>
<p>$delimiter には配列が使える。いわゆる「複数文字列での分割」の動作になる。</p>
<p>$limit に負数を与えると「その絶対値-1までを結合したものと残り」を返す。<br />
素の explode の負数 $limit の動作が微妙に気に入らない（implode 正数と対称性がない）ので再実装。</p>
<p>Example:</p>
<pre><code class="language-php">// 配列を与えると複数文字列での分割
assertSame(multiexplode([',', ' ', '|'], 'a,b c|d'), ['a', 'b', 'c', 'd']);
// 負数を与えると前詰め
assertSame(multiexplode(',', 'a,b,c,d', -2), ['a,b,c', 'd']);
// もちろん上記2つは共存できる
assertSame(multiexplode([',', ' ', '|'], 'a,b c|d', -2), ['a,b,c', 'd']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>array</td>
				<td class="rest">$delimiter</td>
				<td class="desc"><p>分割文字列。配列可</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$string</td>
				<td class="desc"><p>対象文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">int</td>
				<td class="rest">$limit = PHP_INT_MAX</td>
				<td class="desc"><p>分割数</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>分割された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L134-L197" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::quoteexplode()" tabindex="-1" class="structure-title ">
                        quoteexplode						<small>($delimiter, $string, $enclosures = &#039;\&#039;&quot;&#039;, $escape = &#039;\\&#039;)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>エスケープやクオートに対応した explode</p>
<p>$enclosures は配列で開始・終了文字が別々に指定できるが、実装上の都合で今のところ1文字ずつのみ。</p>
<p>Example:</p>
<pre><code class="language-php">// シンプルな例
assertSame(quoteexplode(',', 'a,b,c\\,d,"e,f"'), [
    'a', // 普通に分割される
    'b', // 普通に分割される
    'c\\,d', // \\ でエスケープしているので区切り文字とみなされない
    '"e,f"', // "" でクオートされているので区切り文字とみなされない
]);

// $enclosures で囲い文字の開始・終了文字を明示できる
assertSame(quoteexplode(',', 'a,b,{e,f}', ['{' =&gt; '}']), [
    'a', // 普通に分割される
    'b', // 普通に分割される
    '{e,f}', // { } で囲まれているので区切り文字とみなされない
]);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$delimiter</td>
				<td class="desc"><p>分割文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$string</td>
				<td class="desc"><p>対象文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr>string</td>
				<td class="rest">$enclosures = &#039;\&#039;&quot;&#039;</td>
				<td class="desc"><p>囲い文字。 ["start" =&gt; "end"] で開始・終了が指定できる</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$escape = &#039;\\&#039;</td>
				<td class="desc"><p>エスケープ文字</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>分割された配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L199-L236" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::str_equals()" tabindex="-1" class="structure-title ">
                        str_equals						<small>($str1, $str2, $case_insensitivity = false)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>文字列比較の関数版</p>
<p>文字列以外が与えられた場合は常に false を返す。ただし __toString を実装したオブジェクトは別。</p>
<p>Example:</p>
<pre><code class="language-php">assertTrue(str_equals('abc', 'abc'));
assertTrue(str_equals('abc', 'ABC', true));
assertTrue(str_equals('\0abc', '\0abc'));
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$str1</td>
				<td class="desc"><p>文字列1</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$str2</td>
				<td class="desc"><p>文字列2</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$case_insensitivity = false</td>
				<td class="desc"><p>大文字小文字を区別するか</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>同じ文字列なら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L238-L278" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::str_contains()" tabindex="-1" class="structure-title ">
                        str_contains						<small>($haystack, $needle, $case_insensitivity = false, $and_flag = false)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>指定文字列を含むか返す</p>
<p>Example:</p>
<pre><code class="language-php">assertTrue(str_contains('abc', 'b'));
assertTrue(str_contains('abc', 'B', true));
assertTrue(str_contains('abc', ['b', 'x'], false, false));
assertFalse(str_contains('abc', ['b', 'x'], false, true));
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$haystack</td>
				<td class="desc"><p>対象文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>array</td>
				<td class="rest">$needle</td>
				<td class="desc"><p>調べる文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$case_insensitivity = false</td>
				<td class="desc"><p>大文字小文字を区別するか</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$and_flag = false</td>
				<td class="desc"><p>すべて含む場合に true を返すか</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>$needle を含むなら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L280-L327" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::str_putcsv()" tabindex="-1" class="structure-title ">
                        str_putcsv						<small>($array, $delimiter = &#039;,&#039;, $enclosure = &#039;&quot;&#039;, $escape = &#039;\\&#039;)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>fputcsv の文字列版（str_getcsv の put 版）</p>
<p>エラーは例外に変換される。</p>
<p>普通の配列を与えるとシンプルに "a,b,c" のような1行を返す。<br />
多次元配列（2次元のみを想定）や Traversable を与えるとループして "a,b,c\nd,e,f" のような複数行を返す。</p>
<p>Example:</p>
<pre><code class="language-php">// シンプルな1行を返す
assertSame(str_putcsv(['a', 'b', 'c']), "a,b,c");
assertSame(str_putcsv(['a', 'b', 'c'], "\t"), "a\tb\tc");
assertSame(str_putcsv(['a', ' b ', 'c'], " ", "'"), "a ' b ' c");

// 複数行を返す
assertSame(str_putcsv([['a', 'b', 'c'], ['d', 'e', 'f']]), "a,b,c\nd,e,f");
assertSame(str_putcsv((function() {
    yield ['a', 'b', 'c'];
    yield ['d', 'e', 'f'];
})()), "a,b,c\nd,e,f");
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr><a href="http://php.net/manual/ja/class.traversable.php" class="fqsen" target="_blank">\Traversable</a></td>
				<td class="rest">$array</td>
				<td class="desc"><p>値の配列 or 値の配列の配列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$delimiter = &#039;,&#039;</td>
				<td class="desc"><p>フィールド区切り文字</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$enclosure = &#039;&quot;&#039;</td>
				<td class="desc"><p>フィールドを囲む文字</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$escape = &#039;\\&#039;</td>
				<td class="desc"><p>エスケープ文字</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>CSV 文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L329-L403" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::str_subreplace()" tabindex="-1" class="structure-title ">
                        str_subreplace						<small>($subject, $search, $replaces, $case_insensitivity = false)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>指定文字列を置換する</p>
<p>$subject 内の $search を $replaces に置換する。<br />
str_replace とは「N 番目のみ置換できる」点で異なる。<br />
つまり、$subject='hoge', $replace=[2 =&gt; 'fuga'] とすると「3 番目の 'hoge' が hoge に置換される」という動作になる（0 ベース）。</p>
<p>$replace に 非配列を与えた場合は配列化される。<br />
つまり <code>$replaces = 'hoge'</code> は <code>$replaces = [0 =&gt; 'hoge']</code> と同じ（最初のマッチを置換する）。</p>
<p>$replace に空配列を与えると何もしない。<br />
負数キーは後ろから数える動作となる。<br />
また、置換後の文字列は置換対象にはならない。</p>
<p>N 番目の検索文字列が見つからない場合は例外を投げる。</p>
<p>Example:</p>
<pre><code class="language-php">// 1番目（0ベースなので2番目）の x を X に置換
assertSame(str_subreplace('xxx', 'x', [1 =&gt; 'X']), 'xXx');
// 0番目（最前列）の x を Xa に、-1番目（最後尾）の x を Xz に置換
assertSame(str_subreplace('!xxx!', 'x', [0 =&gt; 'Xa', -1 =&gt; 'Xz']), '!XaxXz!');
// 置換結果は置換対象にならない
assertSame(str_subreplace('xxx', 'x', [0 =&gt; 'xxx', 1 =&gt; 'X']), 'xxxXx');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$subject</td>
				<td class="desc"><p>対象文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$search</td>
				<td class="desc"><p>検索文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">array<span class="type-separator"></span><wbr>string</td>
				<td class="rest">$replaces</td>
				<td class="desc"><p>置換文字列配列（単一指定は配列化される）</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$case_insensitivity = false</td>
				<td class="desc"><p>大文字小文字を区別するか</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>置換された文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L405-L477" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::str_between()" tabindex="-1" class="structure-title ">
                        str_between						<small>($string, $from, $to, &amp;$position = 0, $enclosure = &#039;\&#039;&quot;&#039;, $escape = &#039;\\&#039;)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>指定文字で囲まれた文字列を取得する</p>
<p>$from, $to で指定した文字間を取得する（$from, $to 自体は結果に含まれない）。<br />
ネストしている場合、一番外側の文字間を返す。</p>
<p>$enclosure で「特定文字に囲まれている」場合を無視することができる。<br />
$escape で「特定文字が前にある」場合を無視することができる。</p>
<p>$position を与えた場合、その場所から走査を開始する。<br />
さらに結果があった場合、 $position には「次の走査開始位置」が代入される。<br />
これを使用すると連続で「次の文字, 次の文字, ...」と言った動作が可能になる。</p>
<p>Example:</p>
<pre><code class="language-php">// $position を利用して "first", "second", "third" を得る（"で囲まれた "blank" は返ってこない）。
assertSame(str_between('{first} and {second} and "{blank}" and {third}', '{', '}', $n), 'first');
assertSame(str_between('{first} and {second} and "{blank}" and {third}', '{', '}', $n), 'second');
assertSame(str_between('{first} and {second} and "{blank}" and {third}', '{', '}', $n), 'third');
// ネストしている場合は最も外側を返す
assertSame(str_between('{nest1{nest2{nest3}}}', '{', '}'), 'nest1{nest2{nest3}}');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$string</td>
				<td class="desc"><p>対象文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$from</td>
				<td class="desc"><p>開始文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$to</td>
				<td class="desc"><p>終了文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">int</td>
				<td class="rest">&amp;$position = 0</td>
				<td class="desc"><p>開始位置。渡した場合次の開始位置が設定される</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$enclosure = &#039;\&#039;&quot;&#039;</td>
				<td class="desc"><p>囲い文字。この文字中にいる $from, $to 文字は走査外になる</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$escape = &#039;\\&#039;</td>
				<td class="desc"><p>エスケープ文字。この文字が前にある $from, $to 文字は走査外になる</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string<span class="type-separator"></span><wbr>bool</td>
			<td class="desc"><p>$from, $to で囲まれた文字。見つからなかった場合は false</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L479-L501" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::starts_with()" tabindex="-1" class="structure-title ">
                        starts_with						<small>($string, $with, $case_insensitivity = false)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>指定文字列で始まるか調べる</p>
<p>Example:</p>
<pre><code class="language-php">assertTrue(starts_with('abcdef', 'abc'));
assertTrue(starts_with('abcdef', 'ABC', true));
assertFalse(starts_with('abcdef', 'xyz'));
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$string</td>
				<td class="desc"><p>探される文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$with</td>
				<td class="desc"><p>探す文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$case_insensitivity = false</td>
				<td class="desc"><p>大文字小文字を区別するか</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>指定文字列で始まるなら true を返す</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L503-L525" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::ends_with()" tabindex="-1" class="structure-title ">
                        ends_with						<small>($string, $with, $case_insensitivity = false)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>指定文字列で終わるか調べる</p>
<p>Example:</p>
<pre><code class="language-php">assertTrue(ends_with('abcdef', 'def'));
assertTrue(ends_with('abcdef', 'DEF', true));
assertFalse(ends_with('abcdef', 'xyz'));
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$string</td>
				<td class="desc"><p>探される文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$with</td>
				<td class="desc"><p>探す文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">bool</td>
				<td class="rest">$case_insensitivity = false</td>
				<td class="desc"><p>大文字小文字を区別するか</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">bool</td>
			<td class="desc"><p>対象文字列で終わるなら true</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L527-L542" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::camel_case()" tabindex="-1" class="structure-title ">
                        camel_case						<small>($string, $delimiter = &#039;_&#039;)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>camelCase に変換する</p>
<p>Example:</p>
<pre><code class="language-php">assertSame(camel_case('this_is_a_pen'), 'thisIsAPen');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$string</td>
				<td class="desc"><p>対象文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$delimiter = &#039;_&#039;</td>
				<td class="desc"><p>デリミタ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>変換した文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L544-L559" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::pascal_case()" tabindex="-1" class="structure-title ">
                        pascal_case						<small>($string, $delimiter = &#039;_&#039;)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>PascalCase に変換する</p>
<p>Example:</p>
<pre><code class="language-php">assertSame(pascal_case('this_is_a_pen'), 'ThisIsAPen');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$string</td>
				<td class="desc"><p>対象文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$delimiter = &#039;_&#039;</td>
				<td class="desc"><p>デリミタ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>変換した文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L561-L576" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::snake_case()" tabindex="-1" class="structure-title ">
                        snake_case						<small>($string, $delimiter = &#039;_&#039;)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>snake_case に変換する</p>
<p>Example:</p>
<pre><code class="language-php">assertSame(snake_case('ThisIsAPen'), 'this_is_a_pen');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$string</td>
				<td class="desc"><p>対象文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$delimiter = &#039;_&#039;</td>
				<td class="desc"><p>デリミタ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>変換した文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L578-L593" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::chain_case()" tabindex="-1" class="structure-title ">
                        chain_case						<small>($string, $delimiter = &#039;-&#039;)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>chain-case に変換する</p>
<p>Example:</p>
<pre><code class="language-php">assertSame(chain_case('ThisIsAPen'), 'this-is-a-pen');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$string</td>
				<td class="desc"><p>対象文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$delimiter = &#039;-&#039;</td>
				<td class="desc"><p>デリミタ</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>変換した文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L595-L621" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::random_string()" tabindex="-1" class="structure-title ">
                        random_string						<small>($length = 8, $charlist = &#039;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#039;)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>安全な乱数文字列を生成する</p>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">int</td>
				<td class="rest">$length = 8</td>
				<td class="desc"><p>生成文字列長</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$charlist = &#039;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#039;</td>
				<td class="desc"><p>使用する文字セット</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>乱数文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L623-L657" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::kvsprintf()" tabindex="-1" class="structure-title ">
                        kvsprintf						<small>($format, $array)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>連想配列を指定できるようにした vsprintf</p>
<p>sprintf の順序指定構文('%1$d')にキーを指定できる。</p>
<p>Example:</p>
<pre><code class="language-php">assertSame(kvsprintf('%hoge$s %fuga$d', ['hoge' =&gt; 'ThisIs', 'fuga' =&gt; '3.14']), 'ThisIs 3');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$format</td>
				<td class="desc"><p>フォーマット文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>フォーマット引数</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>フォーマットされた文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L659-L696" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::preg_capture()" tabindex="-1" class="structure-title ">
                        preg_capture						<small>($pattern, $subject, $default)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>キャプチャを主軸においた preg_match</p>
<p>$pattern で $subject をマッチングして $default で埋めて返す。$default はフィルタも兼ねる。<br />
空文字マッチは「マッチしていない」とみなすので注意（$default が使用される）。</p>
<p>キャプチャを主軸においているので「マッチしなかった」は検出不可能。<br />
$default がそのまま返ってくる。</p>
<p>Example:</p>
<pre><code class="language-php">$pattern = '#(\d{4})/(\d{1,2})(/(\d{1,2}))?#';
$default = [1 =&gt; '2000', 2 =&gt; '1', 4 =&gt; '1'];
// 完全にマッチするのでそれぞれ返ってくる
assertSame(preg_capture($pattern, '2014/12/24', $default), [1 =&gt; '2014', 2 =&gt; '12', 4 =&gt; '24']);
// 最後の \d{1,2} はマッチしないのでデフォルト値が使われる
assertSame(preg_capture($pattern, '2014/12', $default), [1 =&gt; '2014', 2 =&gt; '12', 4 =&gt; '1']);
// 一切マッチしないので全てデフォルト値が使われる
assertSame(preg_capture($pattern, 'hoge', $default), [1 =&gt; '2000', 2 =&gt; '1', 4 =&gt; '1']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$pattern</td>
				<td class="desc"><p>正規表現</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$subject</td>
				<td class="desc"><p>対象文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$default</td>
				<td class="desc"><p>デフォルト値</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">array</td>
			<td class="desc"><p>キャプチャした配列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L698-L739" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::preg_splice()" tabindex="-1" class="structure-title ">
                        preg_splice						<small>($pattern, $replacement, $subject, &amp;$matches = [])</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>キャプチャも行える preg_replace</p>
<p>「置換を行いつつ、キャプチャ文字列が欲しい」状況はまれによくあるはず。</p>
<p>$replacement に callable を渡すと preg_replace_callback がコールされる。<br />
callable と入っても単純文字列 callble （"strtoupper" など）は callable とはみなされない。<br />
配列形式の callable や クロージャのみ preg_replace_callback になる。</p>
<p>Example:</p>
<pre><code class="language-php">// 数字を除去しつつその除去された数字を得る
assertSame(preg_splice('#\\d+#', '', 'abc123', $m), 'abc');
assertSame($m, ['123']);

// callable だと preg_replace_callback が呼ばれる
assertSame(preg_splice('#[a-z]+#', function($m){return strtoupper($m[0]);}, 'abc123', $m), 'ABC123');
assertSame($m, ['abc']);

// ただし、 文字列 callable は文字列として扱う
assertSame(preg_splice('#[a-z]+#', 'strtoupper', 'abc123', $m), 'strtoupper123');
assertSame($m, ['abc']);
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$pattern</td>
				<td class="desc"><p>正規表現</p>
</td>
			</tr>
        			<tr>
				<td class="type">string<span class="type-separator"></span><wbr>callable</td>
				<td class="rest">$replacement</td>
				<td class="desc"><p>置換文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$subject</td>
				<td class="desc"><p>対象文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">array</td>
				<td class="rest">&amp;$matches = []</td>
				<td class="desc"><p>キャプチャ配列が格納される</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>置換された文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L741-L811" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::render_string()" tabindex="-1" class="structure-title ">
                        render_string						<small>($template, $array)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>"hoge {$hoge}" 形式のレンダリング</p>
<p>文字列を eval して "hoge {$hoge}" 形式の文字列に変数を埋め込む。<br />
基本処理は <code>eval("return '" . addslashes($template) . "';");</code> と考えて良いが、下記が異なる。</p>
<ul>
<li>数値キーが参照できる</li>
<li>クロージャは呼び出し結果が埋め込まれる。引数は (変数配列, 自身のキー文字列)</li>
<li>引数をそのまま返すだけの特殊な変数 $_ が宣言される</li>
<li>シングルクォートのエスケープは外される</li>
</ul>
<p>$<em> が宣言されるのは変数配列に '</em>' を含んでいないときのみ（上書きを防止するため）。<br />
この $_ は php の埋め込み変数の闇を利用するととんでもないことが出来たりする（サンプルやテストコードを参照）。</p>
<p>ダブルクオートはエスケープされるので文字列からの脱出はできない。<br />
また、 <code>{$_(syntax(""))}</code> のように {$_()} 構文で " も使えなくなるので \' を使用しなければならない。</p>
<p>Example:</p>
<pre><code class="language-php">// 数値キーが参照できる
assertSame(render_string('${0}', ['number']), 'number');
// クロージャは呼び出し結果が埋め込まれる
assertSame(render_string('$c', ['c' =&gt; function($vars, $k){return $k . '-closure';}]), 'c-closure');
// 引数をそのまま返すだけの特殊な変数 $_ が宣言される
assertSame(render_string('{$_(123 + 456)}', []), '579');
// 要するに '$_()' の中に php の式が書けるようになる
assertSame(render_string('{$_(implode(\',\', $strs))}', ['strs' =&gt; ['a', 'n', 'z']]), 'a,n,z');
assertSame(render_string('{$_(max($nums))}', ['nums' =&gt; [1, 9, 3]]), '9');
</code></pre>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$template</td>
				<td class="desc"><p>レンダリング文字列</p>
</td>
			</tr>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>レンダリング変数</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>レンダリングされた文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            				<li class="structure-item">
					<div class="attribute">
						<span class="label label-danger"></span>
						<span class="label label-default">static</span>
						<span class="label label-magic"></span>
						<span class="label label-danger"></span>
						<span class="label label-default"></span>
						<span class="label label-default"></span>
						<span class="label label-deprecated"></span>
						<span class="label label-public">public</span>
                        			<a href="https://github.com/arima-ryunosuke/php-functions/blob/master/src/Package/Strings.php#L813-L825" class="source-link glyphicon glyphicon-new-window" target="_blank"></a>
                                    					</div>
					<h4 id="ryunosuke\Functions\Package\Strings::render_file()" tabindex="-1" class="structure-title ">
                        render_file						<small>($template_file, $array)</small>
					</h4>
					<div class="inner-item">
						<div class="description"><p>"hoge {$hoge}" 形式のレンダリングのファイル版</p>
</div>
                        	<table class="table">
		<caption>Parameters</caption>
		<tbody>
        			<tr>
				<td class="type">string</td>
				<td class="rest">$template_file</td>
				<td class="desc"><p>レンダリングするファイル名</p>
</td>
			</tr>
        			<tr>
				<td class="type">array</td>
				<td class="rest">$array</td>
				<td class="desc"><p>レンダリング変数</p>
</td>
			</tr>
        		</tbody>
	</table>
                            	<table class="table">
		<caption>Return</caption>
		<tbody>
		<tr>
			<td class="type">string</td>
			<td class="desc"><p>レンダリングされた文字列</p>
</td>
			<td class="rest"></td>
		</tr>
		</tbody>
	</table>
                                                                            	<table class="table">
		<caption>See</caption>
		<tbody>
        			<tr>
				<td class="type">
                                            <a href="ryunosuke-Functions-Package-Strings$typespace.html#ryunosuke\Functions\Package\Strings::render_string()" class="fqsen "><small>ryunosuke\Functions\Package\</small><wbr>Strings::render_string()</a>                    				</td>
				<td class="desc"></td>
			</tr>
        		</tbody>
	</table>
    					</div>
					<div class="attribute">
						<span class="label label-default"></span>
						<span class="label label-default"></span>
					</div>
					<div class="clearfix"></div>
				</li>
            		</ul>
    
	<div class="attribute">
		<span class="label label-default"></span>
		<span class="label label-default"></span>
	</div>
	<div class="clearfix"></div>
</div>
</body>
</html>
